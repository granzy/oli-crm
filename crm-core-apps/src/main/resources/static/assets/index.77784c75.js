import{c as S,a as x,T as v}from"./index.e9d54774.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as w,f as r,w as A,o as D,D as i,E as N,u as s,aH as m,aI as o,aS as t,aZ as d,aY as _,bN as j,bO as T,H as l,G as z,cK as L,cs as V,bt as I,ct as J,ar as G,cN as H,cO as O,bU as q}from"./arco.a97fe066.js";import"./chart.a235fbdf.js";import"./vue.4eb70094.js";const K=l("ul",null,[l("li",null,"\u6E05\u7A7A\u7F13\u5B58, \u91CD\u65B0\u5237\u65B0\u9875\u9762"),l("li",null,"\u8054\u7CFB\u7BA1\u7406\u5458")],-1),M=["src"],te=w({__name:"index",setup(P){const F=S(),f=r(""),p=r(""),c=r(!1),{loading:n,setLoading:h}=x(!0);return A(()=>F.theme,a=>{f.value=a},{deep:!0,immediate:!0}),D(async()=>{const{data:a}=await v("scheduleJobs");if(a.length>0){const e=a[0].content||"";p.value=`/xxl-job-admin/toLogin?token=${e}`}else console.warn("\u7F3A\u5C11xxl-job\u7CFB\u7EDFtoken\u914D\u7F6E");const u=document.querySelector("#jobsFrame");u&&(u.onload=()=>{var e;((e=u.contentWindow)==null?void 0:e.document.title)==="\u4EFB\u52A1\u8C03\u5EA6\u4E2D\u5FC3"&&(c.value=!0),setTimeout(()=>{h(!1),console.log("iframe loaded...")},1500)})}),(a,u)=>{const e=L,y=V,E=I,g=J,B=G,b=H,k=O,C=q;return i(),N("div",null,[s(n)?(i(),m(g,{key:0,animation:s(n),style:{padding:"2em 6em"}},{default:o(()=>[t(E,{direction:"vertical",fill:"",size:"large"},{default:o(()=>[t(e,{shape:"circle",size:"large"}),t(y,{rows:20}),t(e)]),_:1})]),_:1},8,["animation"])):d("",!0),!s(n)&&!c.value?(i(),m(C,{key:1,status:"error",title:"\u52A0\u8F7D\u6A21\u5757\u5F02\u5E38"},{icon:o(()=>[t(B,{style:{"font-size":"64px"}})]),subtitle:o(()=>[_("\u4EFB\u52A1\u8C03\u5EA6\u7CFB\u7EDF\u672A\u80FD\u6B63\u5E38\u5DE5\u4F5C")]),default:o(()=>[t(k,{style:{background:"var(--color-fill-3)",padding:"24px"}},{default:o(()=>[t(b,null,{default:o(()=>[_("\u53EF\u4EE5\u5C1D\u8BD5\u4EE5\u4E0B\u65B9\u5F0F\u5904\u7406:")]),_:1}),K]),_:1})]),_:1})):d("",!0),j(l("iframe",{id:"jobsFrame",src:p.value,width:"100%",style:z({height:"calc(100vh - 65px)",border:"none"})},null,12,M),[[T,!s(n)&&c.value]])])}}});export{te as default};
