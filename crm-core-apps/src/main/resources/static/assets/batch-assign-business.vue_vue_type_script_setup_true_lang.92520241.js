import{a as w}from"./index.e9d54774.js";/* empty css               *//* empty css              *//* empty css                */import{d as A,f as g,r as V,D as L,aH as O,aI as e,aY as d,aS as o,u as D,bg as x,c7 as P,c8 as R,bo as T,aO as K,bp as M,bq as N,aT as U,H as q,aW as I,bY as H,cJ as Y}from"./arco.a97fe066.js";import{a as z,b as G}from"./monitor-object-tag.71c4a187.js";/* empty css                */import{q as J,a as W}from"./business.22e8b088.js";import{w as $}from"./tree-util.a8ddc3e6.js";const ne=A({__name:"batch-assign-tag",props:{visible:{type:Boolean,default:!1},records:{},checkKeys:{}},emits:["ok","cancel"],setup(E,{emit:F}){const v=E,{loading:p,setLoading:u}=w(!1),r=F,s=g("APPEND"),t=V({tagId:""}),i=()=>{r("cancel")},_=g([]),y=async()=>{t.tagId="",s.value="APPEND";const{data:c}=await z();_.value=c},C=async()=>{u(!0);try{await G({monitorObjectCheckIds:v.checkKeys,appendModel:s.value,tagId:t.tagId}),x.success("\u5206\u914D\u6210\u529F!"),r("ok")}catch(c){console.error(c)}finally{u(!1)}u(!1)};return(c,a)=>{const l=P,h=R,f=T,b=K,k=M,B=N;return L(),O(B,{width:500,visible:c.visible,"mask-closable":!1,"title-align":"start","ok-loading":D(p),onOk:C,onCancel:i,onBeforeOpen:y},{title:e(()=>[d("\u6279\u91CF\u5206\u914D\u6807\u7B7E")]),default:e(()=>[o(k,{model:t},{default:e(()=>[o(f,{field:"name",label:"\u6A21\u5F0F"},{default:e(()=>[o(h,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=m=>s.value=m),type:"button"},{default:e(()=>[o(l,{value:"APPEND"},{default:e(()=>[d("\u8FFD\u52A0")]),_:1}),o(l,{value:"REPLACE"},{default:e(()=>[d("\u66FF\u6362")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(f,{field:"tagId",label:"\u6807\u7B7E"},{default:e(()=>[o(b,{modelValue:t.tagId,"onUpdate:modelValue":a[1]||(a[1]=m=>t.tagId=m),options:_.value,placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E","allow-search":"",style:{width:"300px"},"allow-clear":"","max-tag-count":1,"field-names":{label:"name",value:"id"},"virtual-list-props":{height:300}},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","ok-loading"])}}});const ue=A({__name:"batch-assign-business",props:{visible:{type:Boolean,default:!1},records:{},checkKeys:{}},emits:["ok","cancel"],setup(E,{emit:F}){const v=E,{loading:p,setLoading:u}=w(!1),r=F,s=g("REPLACE"),t=g([]),i=V({businessId:""}),_=()=>{r("cancel")},y=async()=>{i.businessId="",s.value="REPLACE",t.value=(await J({})).data,t.value=t.value.filter(a=>a.id!=="0"&&a.id!=="-1"),$(t.value,a=>{a.disabled=a.data.type==="FOLDER"})},C=(a,l)=>l.title?l.title.toLowerCase().indexOf(a.toLowerCase())>-1:!1,c=async()=>{u(!0);try{await W({monitorObjectCheckIds:v.checkKeys,appendModel:s.value,businessId:i.businessId}),x.success("\u5206\u914D\u6210\u529F!"),r("ok")}catch(a){console.error(a)}finally{u(!1)}u(!1)};return(a,l)=>{const h=P,f=R,b=T,k=U("icon-font"),B=H,m=Y,S=M,j=N;return L(),O(j,{width:500,visible:a.visible,"mask-closable":!1,"title-align":"start","ok-loading":D(p),onOk:c,onCancel:_,onBeforeOpen:y},{title:e(()=>[d("\u6279\u91CF\u5206\u914D\u76EE\u5F55")]),default:e(()=>[o(S,{model:i},{default:e(()=>[o(b,{field:"name",label:"\u6A21\u5F0F"},{default:e(()=>[o(f,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=n=>s.value=n),type:"button"},{default:e(()=>[o(h,{value:"REPLACE"},{default:e(()=>[d("\u66FF\u6362")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(b,{field:"tagId",label:"\u76EE\u5F55"},{help:e(()=>[d(" \u5F53\u4E0D\u9009\u62E9\u4EFB\u4F55\u76EE\u5F55\u65F6\uFF0C\u76D1\u63A7\u4E3B\u673A\u5C06\u81EA\u52A8\u5F52\u7C7B\u81F3\u201C\u672A\u5206\u7C7B\u201D\u76EE\u5F55\u4E2D ")]),default:e(()=>[o(m,{modelValue:i.businessId,"onUpdate:modelValue":l[1]||(l[1]=n=>i.businessId=n),"allow-search":!0,"allow-clear":!0,data:t.value,style:{width:"420px"},placeholder:"\u8BF7\u9009\u62E9","filter-tree-node":C,loading:D(p)},{"tree-slot-icon":e(({node:n})=>[o(k,{type:n.data.type==="FOLDER"?"icon-folder":"icon-cube",size:16,style:{color:"var(--color-text-2)"}},null,8,["type"])]),"tree-slot-title":e(n=>[q("span",null,I(n.title),1),o(B,{style:{"margin-left":"8px"},color:n.data.type==="FOLDER"?"blue":"green"},{default:e(()=>[d(I(n.data.type==="FOLDER"?"\u6587\u4EF6\u5939":"\u8282\u70B9"),1)]),_:2},1032,["color"])]),_:1},8,["modelValue","data","loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","ok-loading"])}}});export{ne as _,ue as a};
