import{a as N}from"./index.e9d54774.js";import{d as C,c as p,aT as z,D as T,aH as A,aI as L,aS as _,u as g,bK as w,f as V,w as $,n as B,E as F,bz as O,G as E,bB as G}from"./arco.a97fe066.js";import{u as P}from"./chart-option.8bf8c179.js";import{c as v}from"./color.562bf6e9.js";import{c as k}from"./date-time.3a778351.js";import{u as S}from"./unit-util.2cbd6bbc.js";/* empty css                */import{p as j}from"./pagination.72a5f225.js";const R=C({__name:"performance-data-chart",props:{graphData:{type:Array,default:()=>[]},singleLine:{type:Boolean,default:!1},height:{type:String,default:"46vh"},displayNameShow:{type:Boolean,default:!1},xAxisType:{type:String,default:"time"}},setup(x){const{loading:i}=N(),r=x,l=v("color-text-3"),m=v("line-chart-5"),u=p(()=>r.graphData&&r.graphData.length>0?r.graphData[0].unit:""),d=p(()=>{if(r.graphData&&r.graphData.length>0){const e=[];return r.graphData.forEach(t=>{let o;r.xAxisType==="category"?o=Object.keys(t.data).map(c=>Number(t.data[c]).toFixed(2)):o=Object.keys(t.data).map(c=>[k(Number(c)),t.data[c]]);const s={name:t.itemName+(r.displayNameShow?`[${t.displayName}]`:""),type:"line",symbol:"none",smooth:!0,sampling:"lttb",data:o};r.singleLine&&(s.areaStyle={},s.emphasis={areaStyle:{color:m},lineStyle:{color:m}},s.itemStyle={color:m}),e.push(s)}),e}return[]}),y=p(()=>{if(r.xAxisType==="category"){let e=[];return r.graphData&&r.graphData.length>0&&(e=Object.keys(r.graphData[0].data)),{type:"category",boundaryGap:!1,data:e}}return{type:"time",boundaryGap:!1}}),h=e=>u.value?S(u.value,e):Math.round(Number(e)*100)/100,f=v("color-text-3"),D=()=>{let e=10;return d.value.forEach(t=>{t.data.forEach(o=>{let s=o;o instanceof Array&&([,s]=o);const c=h(s).toString().length;c>e&&(e=c)})}),e},b=()=>D()*8,a=p(()=>({appendToBody:!0,trigger:"axis",formatter(e){let t=e[0].value[0];return r.xAxisType==="category"&&(t=e[0].name),e.forEach(o=>{r.xAxisType==="category"?t+=`<br/>${o.marker}${o.seriesName}:${h(o.value)}`:t+=`<br/>${o.marker}${o.seriesName}:${h(o.value[1])}`}),t}})),{chartOption:n}=P(()=>({tooltip:a.value,animation:!1,grid:{right:"40",left:b()},xAxis:y.value,yAxis:{type:"value",scale:!0,axisLabel:{formatter(e){return u.value?S(u.value,e):e}},splitLine:{lineStyle:{type:"dashed",color:f}}},dataZoom:[{height:"20px"}],legend:{top:"4%",padding:10,type:"scroll",orient:"horizontal",textStyle:{color:l}},series:d.value}));return(e,t)=>{const o=z("Chart"),s=w;return T(),A(s,{loading:g(i),style:{width:"100%"}},{default:L(()=>[_(o,{height:x.height,option:g(n)},null,8,["height","option"])]),_:1},8,["loading"])}}}),U=C({__name:"text-data-table",props:{tableHeight:{},textData:{},dataType:{},max:{type:Boolean},min:{type:Boolean}},setup(x){const{pagination:i,pageSizeOptions:r}=j(),l=x,m=V(),u=(a,n)=>n?a?S(a,Number(n)):n:"-",d=p(()=>{let a=[];if(l.textData){const{unit:n}=l.textData;a=l.textData.data.map(e=>{let t=e.clock;return/^\d{10}$/.test(t)&&(t=k(Number(e.clock)*1e3)),{time:t,value:u(n,e.value),maxValue:u(n,e.maxValue),minValue:u(n,e.minValue)}})}return a.reverse()}),y=p(()=>d.value.slice((i.current-1)*i.pageSize,i.current*i.pageSize)),h=p(()=>{const a={border:!0,height:"auto",align:null,size:"mini",columnConfig:{resizable:!0},data:y.value},n=[{field:"time",title:"\u65F6\u95F4"},{field:"value",title:"\u503C"}];return l.dataType==="trend"&&l.max&&n.push({field:"maxValue",title:"\u6700\u5927\u503C"}),l.dataType==="trend"&&l.min&&n.push({field:"minValue",title:"\u6700\u5C0F\u503C"}),{...a,columns:n}}),f=()=>{i.total=d.value.length;const a=m.value;a&&a.loadData(y.value)},D=a=>{i.current=a,f()},b=a=>{i.pageSize=a,f()};return $(()=>l.textData,()=>{B(()=>{f()})},{deep:!0,immediate:!0}),(a,n)=>{const e=G,t=z("vxe-grid");return T(),F("div",{style:E({height:a.tableHeight})},[_(t,O({ref_key:"xGrid",ref:m},h.value),{pager:L(()=>[_(e,{ref:"xPagination",current:g(i).current,"page-size":g(i).pageSize,total:g(i).total,"page-size-options":g(r),style:{"padding-top":"10px"},"show-total":"","show-jumper":"","show-page-size":"",onChange:D,onPageSizeChange:b},null,8,["current","page-size","total","page-size-options"])]),_:1},16)],4)}}});export{U as _,R as a};
