import{b as Q,_ as A,h as F,a as P,l as L}from"./index.e9d54774.js";import{d as b,D as x,aH as z,aI as t,aS as e,aY as D,aW as S,u as v,bC as X,a_ as ee,bX as k,f as _,o as te,aT as E,bF as ae,cp as oe,bt as O,cq as M,cr as T,bI as ne,bJ as se,H as h,c as C,aQ as I,bK as V,bz as le,bY as re,aM as ie,bB as ce,E as ue}from"./arco.a97fe066.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{u as W}from"./chart-option.8bf8c179.js";import{z as pe,s as B,p as _e}from"./problem.b594769f.js";/* empty css                */import{p as de}from"./pagination.72a5f225.js";import"./chart.a235fbdf.js";import"./vue.4eb70094.js";import"./FileSaver.min.64c4208e.js";import"./_commonjs-dynamic-modules.30ae7933.js";const me=b({__name:"banner",setup(f){const{userInfo:i}=Q();return(s,c)=>{const u=X,l=ee,d=k;return x(),z(l,{class:"banner"},{default:t(()=>[e(l,{span:8},{default:t(()=>[e(u,{heading:5,style:{"margin-top":"0"}},{default:t(()=>[D(S(s.$t("workplace.welcome"))+" "+S(v(i).username),1)]),_:1})]),_:1}),e(d,{class:"panel-border"})]),_:1})}}});const fe=A(me,[["__scopeId","data-v-6748dc62"]]);function ge(){return F.get("/dashboard/workspace/getTopMetricNumber")}function ve(){return F.get("/dashboard/workspace/countZabbixMonitorObject")}function he(){return F.get("/dashboard/workspace/countUnRecoveryZabbixProblem")}const N=f=>(ne("data-v-dc699135"),f=f(),se(),f),be=N(()=>h("span",{class:"unit"},"\u4E2A",-1)),xe=N(()=>h("span",{class:"unit"},"\u53F0",-1)),ye=N(()=>h("span",{class:"unit"},"\u4E2A",-1)),we=N(()=>h("span",{class:"unit"},"\u4E2A",-1)),Ce=b({__name:"data-panel",setup(f){const i=_({hostNumber:0,itemNumber:0,triggerNumber:0,appNumber:0}),s=async()=>{i.value=(await ge()).data};return te(()=>{s()}),(c,u)=>{const l=E("icon-font"),d=ae,m=oe,o=O,a=M,r=k,p=T;return x(),z(p,{cols:24,"row-gap":16,class:"panel"},{default:t(()=>[e(a,{class:"panel-col",span:{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6}},{default:t(()=>[e(o,null,{default:t(()=>{var n;return[e(d,{size:54,class:"col-avatar"},{default:t(()=>[e(l,{type:"icon-alarm-dashboard",size:24})]),_:1}),e(m,{title:"\u96C6\u7FA4\u6570\u91CF",value:(n=i.value)==null?void 0:n.appNumber,"value-from":0,animation:"","show-group-separator":""},{suffix:t(()=>[be]),_:1},8,["value"])]}),_:1})]),_:1}),e(a,{class:"panel-col",span:{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6}},{default:t(()=>[e(o,null,{default:t(()=>{var n;return[e(d,{size:54,class:"col-avatar"},{default:t(()=>[e(l,{type:"icon-physical-host",size:30})]),_:1}),e(m,{title:"\u4E3B\u673A\u6570\u91CF",value:(n=i.value)==null?void 0:n.hostNumber,precision:0,"value-from":0,animation:"","show-group-separator":""},{suffix:t(()=>[xe]),_:1},8,["value"])]}),_:1})]),_:1}),e(a,{class:"panel-col",span:{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6}},{default:t(()=>[e(o,null,{default:t(()=>{var n;return[e(d,{size:54,class:"col-avatar"},{default:t(()=>[e(l,{type:"icon-zabbix-item-trends",size:24})]),_:1}),e(m,{title:"\u76D1\u63A7\u9879\u6570\u91CF",value:(n=i.value)==null?void 0:n.itemNumber,"value-from":0,animation:"","show-group-separator":""},{suffix:t(()=>[ye]),_:1},8,["value"])]}),_:1})]),_:1}),e(a,{class:"panel-col",span:{xs:12,sm:12,md:12,lg:12,xl:12,xxl:6},style:{"border-right":"none"}},{default:t(()=>[e(o,null,{default:t(()=>{var n;return[e(d,{size:54,class:"col-avatar"},{default:t(()=>[e(l,{type:"icon-zabbix-trigger",size:30})]),_:1}),e(m,{title:"\u89E6\u53D1\u5668\u6570\u91CF",value:(n=i.value)==null?void 0:n.triggerNumber,precision:0,"value-from":0,animation:""},{suffix:t(()=>[we]),_:1},8,["value"])]}),_:1})]),_:1}),e(a,{span:24},{default:t(()=>[e(r,{class:"panel-border"})]),_:1})]),_:1})}}});const ze=A(Ce,[["__scopeId","data-v-dc699135"]]),De=b({__name:"content-chart",setup(f){const{loading:i,setLoading:s}=P(!0),c=_(),u=async()=>{s(!0);try{c.value=(await he()).data}catch{}finally{s(!1)}},l=C(()=>{const a=[];for(const r in c.value)a.push(pe[r]);return a}),d=a=>`rgb(${getComputedStyle(document.body).getPropertyValue(a).trim()})`,m=C(()=>{const a=[],r=[];for(const p in c.value){const n=B[p]?`--${B[p].toLowerCase()}-6`:"";r.push({value:c.value[p],itemStyle:{color:d(n)}})}return a.push({data:r,type:"bar"}),a}),{chartOption:o}=W(()=>({grid:{left:"6.6%",right:"0",top:"10%",bottom:"30"},xAxis:{type:"category",data:l.value},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",color:"#E5E8EF"}}},tooltip:{show:!0,trigger:"item"},series:m.value}));return u(),(a,r)=>{const p=E("Chart"),n=I,y=V;return x(),z(y,{loading:v(i),style:{width:"100%"}},{default:t(()=>[e(n,{class:"general-card","header-style":{paddingBottom:0},"body-style":{paddingTop:"20px"},title:"\u5F53\u524D\u544A\u8B66\u7EDF\u8BA1"},{default:t(()=>[e(p,{height:"310px",option:v(o)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}}),Se={style:{height:"310px"}},Be={style:{color:"var(--color-bg-5)"}},Ae={style:{display:"flex",width:"100%","padding-top":"10px","justify-content":"space-between"}},Ee=b({__name:"popular-content",setup(f){const{loading:i,setLoading:s}=P(!1),{pageSizeOptions:c}=de(),u=_(1),l=_(100),d=_(),m=_(),o=_([{title:"\u7EA7\u522B",field:"severityStr",width:65,slots:{default:"severity"},visible:!0},{title:"\u544A\u8B66\u6807\u9898",field:"name",minWidth:350,slots:{default:"name"},visible:!0},{title:"\u4E3B\u673A\u540D",field:"hosts.name",minWidth:100,visible:!0},{title:"\u544A\u8B66\u65F6\u95F4",field:"clock",width:160,visible:!0},{title:"\u544A\u8B66\u65F6\u957F",field:"durationStr",width:135,visible:!0},{title:"\u5E94\u7528",field:"appName",width:135,visible:!0}]),a=_({size:"mini",height:"auto",columnConfig:{resizable:!0},rowConfig:{keyField:"eventid",isHover:!0},checkboxConfig:{reserve:!0},showOverflow:"tooltip"}),r=_([]),p=_([]),n=_([]),y=()=>{const g=(u.value-1)*l.value,$=g+l.value;p.value=L.cloneDeep(r.value.slice(g,$))},j=async g=>{try{s(!0),n.value=[],r.value=(await _e(g)).data,n.value=L.cloneDeep(r.value),y()}catch{}finally{s(!1)}},K=g=>{u.value=g,y()},Z=g=>{u.value=1,l.value=g,y()},G=_({severities:[!1,!1,!1,!1,!1,!1],search:{name:""},isProblem:!0});return j(G.value),(g,$)=>{const R=re,H=ie,U=ce,Y=E("vxe-grid"),q=O,J=I;return x(),z(J,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"17px 20px 21px 20px"}},{title:t(()=>[D("\u544A\u8B66\u5217\u8868")]),default:t(()=>[e(q,{direction:"vertical",size:10,fill:""},{default:t(()=>[h("div",Se,[e(Y,le({ref_key:"xGrid",ref:d,columns:o.value},a.value,{loading:v(i),data:p.value}),{severity:t(({row:w})=>[e(R,{color:`rgb(var(--${(v(B)[w.severity]?v(B)[w.severity]:"").toLowerCase()}-6))`},{default:t(()=>[h("span",Be,S(w.severityStr),1)]),_:2},1032,["color"])]),name:t(({row:w})=>[e(H,{hoverable:!1,style:{"font-size":"12px"}},{default:t(()=>[D(S(w.name),1)]),_:2},1024)]),pager:t(()=>[h("div",Ae,[e(U,{ref_key:"xPagination",ref:m,total:r.value.length,current:u.value,"page-size":l.value,"page-size-options":v(c),"show-total":"","show-jumper":"","show-page-size":"",onChange:K,onPageSizeChange:Z},null,8,["total","current","page-size","page-size-options"])])]),_:1},16,["columns","loading","data"])])]),_:1})]),_:1})}}});const Ne=A(Ee,[["__scopeId","data-v-e07c3ec3"]]),$e=b({__name:"categories-percent",setup(f){const{loading:i}=P(),s=_(),c=async()=>{s.value=(await ve()).data},u=C(()=>{const o=[];for(const a in s.value)o.push(a);return o}),l=C(()=>{const o=[];for(const a in s.value)o.push({value:s.value[a],name:a});return o}),d=C(()=>{let o=0;for(const a in s.value)o+=s.value[a];return o}),{chartOption:m}=W(o=>({legend:{left:"center",data:u.value,bottom:0,icon:"circle",itemWidth:8,textStyle:{color:o?"rgba(255, 255, 255, 0.7)":"#4E5969"},itemStyle:{borderWidth:0}},grid:{top:-120},tooltip:{show:!0,trigger:"item"},graphic:{elements:[{type:"text",left:"center",top:"35%",style:{text:"\u8D44\u6E90\u603B\u6570",textAlign:"center",fill:o?"#ffffffb3":"#4E5969",fontSize:14}},{type:"text",left:"center",top:"45%",style:{text:d.value,textAlign:"center",fill:o?"#ffffffb3":"#1D2129",fontSize:16,fontWeight:500}}]},series:[{type:"pie",radius:["50%","70%"],center:["50%","40%"],labelLine:{length:0,smooth:!0},label:{formatter:"{d}%",fontSize:12,color:o?"rgba(255, 255, 255, 0.7)":"#4E5969"},itemStyle:{borderColor:o?"#232324":"#fff",borderWidth:1},data:l.value}]}));return c(),(o,a)=>{const r=E("Chart"),p=I,n=V;return x(),z(n,{loading:v(i),style:{width:"100%"}},{default:t(()=>[e(p,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"20px"}},{title:t(()=>[D("\u8D44\u6E90\u7C7B\u578B\u5360\u6BD4")]),default:t(()=>[e(r,{height:"310px",option:v(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}}),Fe={class:"container"},Pe={class:"left-side"},Ie={class:"panel"},Le={name:"Dashboard"},ke=b({...Le,setup(f){return(i,s)=>{const c=M,u=T;return x(),ue("div",Fe,[h("div",Pe,[h("div",Ie,[e(fe),e(ze),e(u,{cols:24,"col-gap":16,"row-gap":16,style:{"margin-top":"16px"}},{default:t(()=>[e(c,{span:{xs:24,sm:24,md:24,lg:12,xl:12,xxl:12}},{default:t(()=>[e($e)]),_:1}),e(c,{span:{xs:24,sm:24,md:24,lg:12,xl:12,xxl:12}},{default:t(()=>[e(De)]),_:1})]),_:1})]),e(u,{cols:24,"col-gap":16,"row-gap":16,style:{"margin-top":"16px"}},{default:t(()=>[e(c,{span:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24}},{default:t(()=>[e(Ne)]),_:1})]),_:1})])])}}});const Xe=A(ke,[["__scopeId","data-v-6c522c34"]]);export{Xe as default};
