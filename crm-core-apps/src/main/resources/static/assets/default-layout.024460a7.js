import{b as T,i as Re,j as Te,k as ce,l as ee,m as de,c as O,d as ze,n as Ne,u as Oe,o as pe,_ as j,a as _e,p as Ve,v as Ue,q as fe,H as ue,g as qe,e as He,s as je,t as We,w as Ge,x as Ke,y as me,R as Je,D as Qe,z as Ye,A as Ze,B as Xe,C as et,E as tt,F as at}from"./index.e9d54774.js";import{e as G,F as ot}from"./index.21d6b8e1.js";import{bg as q,f as $,w as H,c as x,d as A,o as K,n as nt,aS as a,bw as st,h as le,aJ as ie,bx as ut,by as lt,D as w,aH as M,aI as u,u as k,bs as it,bo as rt,bp as ct,bq as ve,aT as dt,E as R,aY as N,aZ as P,H as b,bz as pt,a_ as he,aN as ge,bt as be,bA as _t,b0 as ye,aM as ft,bB as mt,bi as we,i as vt,aW as U,aU as Ce,aV as Fe,bC as ht,R as gt,bD as bt,bE as yt,a8 as wt,bF as Ct,bG as Ee,bH as ke,bI as ae,bJ as oe,bK as Ft,aC as Et,ap as kt,F as xe,bL as xt,a3 as Bt,b1 as Dt,bM as St,aF as Mt,b as $t,p as It,bN as Pt,bO as At,G as re,bP as Lt,bQ as Rt,bR as Tt}from"./arco.a97fe066.js";import{f as J,h as ne,i as zt,j as Nt,k as Ot,l as Vt}from"./vue.4eb70094.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{l as Ut}from"./logo.d5f33f3a.js";import{_ as qt}from"./download.430d1db4.js";/* empty css               *//* empty css              */import{d as Ht}from"./index.127a6572.js";import{v as jt}from"./validate.dea67cb4.js";/* empty css                *//* empty css                *//* empty css              */import{d as Wt}from"./global.90f51a62.js";import{p as Gt}from"./pagination.72a5f225.js";import{g as Kt,u as Jt,d as Qt,a as Yt}from"./attach-file.ee7f1d15.js";/* empty css                */import{_ as Zt}from"./page-layout.vue_vue_type_script_setup_true_lang.62508a82.js";import"./chart.a235fbdf.js";function Xt(){const r=J(),n=T();return{logout:async l=>{await n.logout();const p=r.currentRoute.value;q.success("\u767B\u51FA\u6210\u529F"),r.push({name:l&&typeof l=="string"?l:"login",query:{...r.currentRoute.value.query,redirect:p.name}})}}}const ea=(r,n)=>{const{target:s="_blank",...l}=n||{};window.open(r,s,Object.entries(l).reduce((p,_)=>{const[f,v]=_;return[...p,`${f}=${v}`]},[]).join(","))},ta=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),aa=[...Re,...Te],oa=()=>{const r=ce.getRoutes().map(s=>{const{name:l,path:p,meta:_,redirect:f,children:v}=s;return{name:l,path:p,meta:_,redirect:f,children:v}}),n=aa.map(s=>{const{name:l,path:p,meta:_,redirect:f,children:v}=s;return{name:l,path:p,meta:_,redirect:f,children:v}});return n.forEach(s=>{r.forEach(l=>{l.meta&&l.meta.parentRouterName===s.name&&(s.children||(s.children=[]),ee.remove(s.children,p=>p.name===l.name),s.children.push(l))})}),n},na=oa;function sa(){const r=de(),n=O(),s=$([]),l=T();return H(()=>n.zabbixMonitorObjectTypeConfigList,async()=>{ze(ce),await n.fetchServerPermissionMenu(l.userInfo.id),s.value=na()},{immediate:!0}),{menuTree:x(()=>{const _=Ne.exports.cloneDeep(s.value),f=n.appAsyncPermissionMenus.reduce((g,C)=>(g.set(C.name,{order:C.sortIndex,title:C.title}),g),new Map);function v(g,C){return g?(g.sort((m,F)=>{var D,d,t,i;return(((D=f.get(m.name))==null?void 0:D.order)||((d=m.meta)==null?void 0:d.order)||0)-(((t=f.get(F.name))==null?void 0:t.order)||((i=F.meta)==null?void 0:i.order)||0)}),g.map(m=>{var D,d,t;if(!r.accessRouter(m))return null;if(m.meta&&(m.meta.title=(D=f.get(m.name))==null?void 0:D.title),((d=m.meta)==null?void 0:d.hideChildrenInMenu)||!m.children)return m.children=[],m;m.children=m.children.filter(i=>{var c,o,e;return((c=i.meta)==null?void 0:c.hideInMenu)!==!0&&(f.get(i.name)||((o=i.meta)==null?void 0:o.isRouter)||!((e=i.meta)!=null&&e.requiresAuth))});const F=v(m.children,C+1);return F.length||C>1?(m.children=F,m):((t=m.meta)==null?void 0:t.hideInMenu)===!1?m:null}).filter(Boolean)):null}return v(_,0)})}}const ua=A({emit:["collapse"],setup(){const{t:r}=Oe(),n=O(),s=J(),l=ne(),{menuTree:p}=sa(),_=x({get(){return n.device==="desktop"?n.menuCollapse:!1},set(t){n.updateSettings({menuCollapse:t})}}),f=x(()=>n.topMenu),v=$([]),g=$([]),C=t=>{if(ta.test(t.path)){ea(t.path),g.value=[t.name];return}const{hideInMenu:i,activeMenu:c}=t.meta;if(l.name===t.name&&!i&&!c){g.value=[t.name];return}s.push({name:t.name})},B=()=>{let t=l.name;const i=[];l.matched.forEach(c=>{i.push(c.name),c.redirect&&(t=c.name);let o=0;const e=[];i.forEach(h=>{e.push(`${o}_${h}`),o+=1}),v.value=e}),g.value=[t]};H(()=>l.name,()=>{B()}),K(B);const m=t=>{const i=[];let c=!1;const o=(e,h)=>{var S;if(e.name===t){c=!0,i.push(...h);return}(S=e.children)!=null&&S.length&&e.children.forEach(y=>{o(y,[...h,y.name])})};return p.value.forEach(e=>{c||o(e,[e.name])}),i};pe(t=>{const{requiresAuth:i,activeMenu:c,hideInMenu:o}=t.meta;if(i&&(!o||c)){const e=m(c||t.name),h=new Set([...e,...v.value]);v.value=[...h],g.value=[c||e[e.length-1]]}},!0);const F=t=>{n.device==="desktop"&&n.updateSettings({menuCollapse:t})},D=()=>{function t(i,c=[],o=0){return i&&i.forEach(e=>{var y;const h=(y=e==null?void 0:e.meta)!=null&&y.icon?()=>{var E;return le(ie(`<icon-font class="menu-icon"  type="${(E=e==null?void 0:e.meta)==null?void 0:E.icon}"/>`))}:null,S=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?a(ut,{key:`${o}_${e==null?void 0:e.name}`,"popup-max-height":1500},{default:()=>[t(e==null?void 0:e.children,[],o+1)],icon:h,title:()=>{var E,I;return le(ie(((E=e==null?void 0:e.meta)==null?void 0:E.title)||r(((I=e==null?void 0:e.meta)==null?void 0:I.locale)||"")||""))}}):a(lt,{key:e==null?void 0:e.name,onClick:()=>C(e)},{default:()=>{var E,I;return[((E=e==null?void 0:e.meta)==null?void 0:E.title)||r(((I=e==null?void 0:e.meta)==null?void 0:I.locale)||"")||""]},icon:h});c.push(S)}),c}return t(p.value)},d=$(D());return H(()=>p.value,()=>{nt(()=>{d.value=D()})}),()=>a(st,{mode:f.value?"horizontal":"vertical",collapsed:_.value,"onUpdate:collapsed":t=>_.value=t,"open-keys":v.value,"onUpdate:open-keys":t=>v.value=t,"show-collapse-button":n.device!=="mobile","auto-open":!1,"selected-keys":g.value,"auto-open-selected":!0,"level-indent":34,"popup-max-height":1500,style:"height: 100%;width:100%;",onCollapse:F,onSubMenuClick:(t,i)=>{if(i.indexOf(t)>=0){const c=parseInt(t.split("_")[0],10);i[c]=t,v.value=i.slice(0,c+1)}}},{default:()=>[d.value]})}});const te=j(ua,[["__scopeId","data-v-e9f6a838"]]),la=A({__name:"reset-password",props:{visible:{type:Boolean,default:!1}},emits:["ok","cancel"],setup(r,{emit:n}){const s=n,l=()=>{s("cancel")},p=$(),_=$({rawPassword:"",password:"",confirmPassword:""}),f=Ht(async(d,t)=>{const i=T(),{id:c}=i;if(d){const{data:o}=await Ue({id:c,rawPassword:G(d)});o?t():t("\u539F\u5BC6\u7801\u9A8C\u8BC1\u5931\u8D25")}else t("\u8BF7\u8F93\u5165\u539F\u5BC6\u7801")},500),{loading:v,setLoading:g}=_e(!1),C=async()=>{g(!0);const d=await p.value.validate();try{if(d)console.warn("\u9A8C\u8BC1\u4E0D\u901A\u8FC7");else{const t=T(),{id:i}=t;await Ve({id:i,rawPassword:G(_.value.rawPassword),password:G(_.value.password),confirmPassword:G(_.value.confirmPassword)}),q.success("\u63D0\u4EA4\u6210\u529F"),g(!1),s("ok",_.value)}}catch(t){console.error(t)}finally{g(!1)}};let B=!1;const m=d=>{const{value:t}=d.target;B=B||!!t},F=(d,t)=>{const i=_.value.confirmPassword;d&&B&&i&&p.value.validateField("confirmPassword"),t()},D=(d,t)=>{d&&d!==_.value.password&&t("\u60A8\u8F93\u5165\u7684\u4E24\u4E2A\u5BC6\u7801\u4E0D\u4E00\u81F4!")};return(d,t)=>{const i=it,c=rt,o=ct,e=ve;return w(),M(e,{"unmount-on-close":"",visible:d.visible,width:"500","title-align":"start",title:"\u4FEE\u6539\u5BC6\u7801","mask-closable":!1,draggable:"","ok-loading":k(v),onCancel:l,onOk:C},{default:u(()=>[a(o,{ref_key:"submitFormRef",ref:p,model:_.value},{default:u(()=>[a(c,{field:"rawPassword",label:"\u539F\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801"},{validator:k(f)}],required:"","validate-trigger":"blur"},{default:u(()=>[a(i,{modelValue:_.value.rawPassword,"onUpdate:modelValue":t[0]||(t[0]=h=>_.value.rawPassword=h),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["rules"]),a(c,{field:"password",label:"\u65B0\u5BC6\u7801",required:"","validate-trigger":"blur",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},{match:k(jt),message:"\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD,\u6570\u5B57,\u7279\u6B8A\u5B57\u7B26,\u81F3\u5C118\u4E2A\u5B57\u7B26\uFF0C\u6700\u591A30\u4E2A\u5B57\u7B26"},{validator:F}]},{default:u(()=>[a(i,{modelValue:_.value.password,"onUpdate:modelValue":t[1]||(t[1]=h=>_.value.password=h),modelModifiers:{trim:!0},autocomplete:"new-password",onBlur:m},null,8,["modelValue"])]),_:1},8,["rules"]),a(c,{field:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801",required:"","validate-trigger":"blur",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},{validator:D,message:"\u60A8\u8F93\u5165\u7684\u4E24\u4E2A\u5BC6\u7801\u4E0D\u4E00\u81F4"}]},{default:u(()=>[a(i,{modelValue:_.value.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=h=>_.value.confirmPassword=h),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["visible","ok-loading"])}}}),ia={style:{height:"calc(100vh - 115px)"}},ra=A({__name:"index",setup(r){const{isSuperAdmin:n}=T(),{loading:s,setLoading:l}=_e(!1),p=fe(),_=$([]),{pagination:f,pageSizeOptions:v}=Gt(),g=$(),C=$(),B=$(),m=$({size:"mini",height:"auto",columnConfig:{resizable:!0},rowConfig:{keyField:"id",isHover:!0},checkboxConfig:{reserve:!0},showOverflow:"tooltip",columns:[{title:"\u9644\u4EF6\u540D\u79F0",field:"fileName",minWidth:120},{title:"\u4E0A\u4F20\u65F6\u95F4",field:"createTime",width:150},{title:"\u64CD\u4F5C",width:120,fixed:"right",resizable:!1,slots:{default:"action"}}]}),F=async()=>{l(!0);const o=g.value;try{const{data:e}=await Kt(ue);if(B.value=e,f.total=e.length,o){const{current:h,pageSize:S,total:y}=f,E=(h-1)*S,I=E+S>y?y:E+S,z=ee.slice(e,E,I);await o.reloadData(z)}}catch(e){console.error(e)}finally{l(!1)}},D=o=>{f.current=o,F()},d=o=>{f.pageSize=o,F()},t=async o=>{_.value=o;const e=o.find(h=>h.status==="init");e!=null&&e.file&&(ee.find(B.value,S=>{var y;return S.fileName===((y=e==null?void 0:e.file)==null?void 0:y.name)})?q.warning("\u8BE5\u9644\u4EF6\u5DF2\u5B58\u5728\uFF01"):await Jt({module:ue},e==null?void 0:e.file),await F()),_.value=[]},i=o=>{ve.warning({title:"\u63D0\u793A",titleAlign:"start",hideCancel:!1,content:`\u786E\u5B9A\u5220\u9664${o.fileName}\u5417?`,onOk:async()=>{await Qt(o.id),q.success("\u5220\u9664\u6210\u529F"),await F()}})},c=async o=>{q.loading("\u5DF2\u521B\u5EFA\u4E0B\u8F7D\u4EFB\u52A1\uFF0C\u5B8C\u6210\u540E\u6D4F\u89C8\u5668\u5C06\u81EA\u52A8\u4E0B\u8F7D\uFF01"),p.addDownloadItem(o.fileName),Wt(await Yt(o.id),o.fileName),p.delDownloadItem(o.fileName)};return K(()=>{F()}),(o,e)=>{const h=he,S=ge,y=be,E=_t,I=ye,z=ft,Q=mt,Y=dt("vxe-grid");return w(),R("div",null,[a(I,null,{default:u(()=>[a(h,{span:14}),k(n)?(w(),M(h,{key:0,span:10,style:{"text-align":"right"}},{default:u(()=>[a(y,{style:{"margin-bottom":"5px"}},{default:u(()=>[a(E,{"file-list":_.value,"auto-upload":!1,"show-file-list":!1,onChange:t},{"upload-button":u(()=>[a(y,null,{default:u(()=>[a(S,{type:"primary"},{default:u(()=>[N("\u6DFB\u52A0\u9644\u4EF6")]),_:1})]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1})):P("",!0)]),_:1}),b("div",ia,[a(Y,pt({ref_key:"xGrid",ref:g,loading:k(s)},m.value),{action:u(({row:W})=>[a(y,null,{default:u(()=>[a(z,{type:"text",onClick:Z=>c(W)},{default:u(()=>[N("\u4E0B\u8F7D")]),_:2},1032,["onClick"]),k(n)?(w(),M(z,{key:0,type:"text",onClick:Z=>i(W)},{default:u(()=>[N(" \u5220\u9664 ")]),_:2},1032,["onClick"])):P("",!0)]),_:2},1024)]),pager:u(()=>[a(Q,{ref_key:"xPagination",ref:C,current:k(f).current,"page-size":k(f).pageSize,total:k(f).total,"page-size-options":k(v),style:{"padding-top":"10px"},"show-total":"","show-jumper":"","show-page-size":"",onChange:D,onPageSizeChange:d},null,8,["current","page-size","total","page-size-options"])]),_:1},16,["loading"])])])}}}),ca=A({__name:"draw",props:{visible:{type:Boolean,default:!1}},setup(r){return(n,s)=>{const l=we;return w(),M(l,{"unmount-on-close":"",visible:n.visible,width:"50vw","title-align":"start",title:"\u5E2E\u52A9\u4E2D\u5FC3","mask-closable":!1,footer:!1},{default:u(()=>[a(ra)]),_:1},8,["visible"])}}}),da=r=>(ae("data-v-373efaf3"),r=r(),oe(),r),pa={class:"navbar"},_a={class:"left-side"},fa=["src"],ma={class:"center-side"},va={class:"right-side"},ha={key:0},ga=["src"],ba={style:{"margin-left":"2px"}},ya=da(()=>b("span",null,"\u4FEE\u6539\u5BC6\u7801",-1)),wa=A({__name:"index",setup(r){const n=O(),s=T(),l=fe(),{logout:p}=Xt(),{isFullscreen:_,toggle:f}=zt(),v=$(!1),g=$(!1),C=x(()=>s.username),B=x(()=>n.theme),m=x(()=>n.topMenu&&n.menu),F=Nt({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(o){n.toggleTheme(o)}}),D=Ot(F),d=()=>{D()},t=()=>{p()},i=vt("toggleDrawerMenu"),c=$("\u7EDF\u4E00\u76D1\u63A7\u8FD0\u7EF4\u5E73\u53F0");return qe("\u7CFB\u7EDF\u914D\u7F6E","system_name").then(o=>{o&&(c.value=o.data.content)}),(o,e)=>{const h=ht,S=gt,y=be,E=ge,I=Ft,z=Et,Q=he,Y=ye,W=bt,Z=We,Be=Ge,X=yt,De=Ke,Se=kt,Me=wt,$e=Ct,Ie=He,se=Ee,Pe=je,Ae=ke;return w(),R("div",pa,[b("div",_a,[a(y,null,{default:u(()=>[b("img",{alt:"logo",style:{width:"25px",height:"25px"},src:k(Ut)},null,8,fa),a(h,{style:{margin:0,fontSize:"18px"},heading:5},{default:u(()=>[N(U(c.value),1)]),_:1}),!m.value&&k(n).device==="mobile"?(w(),M(S,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:k(i)},null,8,["onClick"])):P("",!0)]),_:1})]),b("div",ma,[m.value?(w(),M(te,{key:0})):P("",!0)]),b("ul",va,[k(l).isDownloading?(w(),R("li",ha,[a(W,null,{content:u(()=>[(w(!0),R(Ce,null,Fe(k(l).downloadList,(L,Le)=>(w(),M(Y,{key:Le,style:{width:"320px"}},{default:u(()=>[a(Q,null,{default:u(()=>[a(I,{size:12}),b("span",ba,[a(z),N(" \u6B63\u5728\u51C6\u5907\u6587\u4EF6: "+U(L),1)])]),_:2},1024)]),_:2},1024))),128))]),default:u(()=>[a(E,{type:"text",shape:"circle"},{icon:u(()=>[b("img",{src:k(qt),alt:""},null,8,ga)]),_:1})]),_:1})])):P("",!0),b("li",null,[a(X,{content:B.value==="light"?o.$t("settings.navbar.theme.toDark"):o.$t("settings.navbar.theme.toLight")},{default:u(()=>[a(E,{class:"nav-btn",type:"outline",shape:"circle",onClick:d},{icon:u(()=>[B.value==="dark"?(w(),M(Z,{key:0})):(w(),M(Be,{key:1}))]),_:1})]),_:1},8,["content"])]),b("li",null,[a(X,{content:k(_)?o.$t("settings.navbar.screen.toExit"):o.$t("settings.navbar.screen.toFull")},{default:u(()=>[a(E,{class:"nav-btn",type:"outline",shape:"circle",onClick:k(f)},{icon:u(()=>[k(_)?(w(),M(De,{key:0})):(w(),M(Se,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),b("li",null,[a(X,{content:"\u5E2E\u52A9\u4E2D\u5FC3"},{default:u(()=>[a(E,{class:"nav-btn",type:"outline",shape:"circle",onClick:e[0]||(e[0]=L=>g.value=!0)},{icon:u(()=>[a(Me)]),_:1})]),_:1})]),b("li",null,[a(Ae,{trigger:"click"},{content:u(()=>[a(se,null,{default:u(()=>[a(y,{onClick:e[1]||(e[1]=L=>v.value=!0)},{default:u(()=>[a(Ie),ya]),_:1})]),_:1}),a(se,null,{default:u(()=>[a(y,{onClick:t},{default:u(()=>[a(Pe),b("span",null,U(o.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:u(()=>[a($e,{style:{backgroundColor:"#00d0b6",marginRight:"8px",cursor:"pointer"}},{default:u(()=>[N(U(C.value),1)]),_:1})]),_:1})])]),a(la,{visible:v.value,onCancel:e[2]||(e[2]=L=>v.value=!1),onOk:e[3]||(e[3]=L=>v.value=!1)},null,8,["visible"]),a(ca,{visible:g.value,onCancel:e[4]||(e[4]=L=>g.value=!1),onOk:e[5]||(e[5]=L=>g.value=!1)},null,8,["visible"])])}}});const Ca=j(wa,[["__scopeId","data-v-373efaf3"]]),V=r=>(ae("data-v-17257cfa"),r=r(),oe(),r),Fa={class:"tag-link"},Ea=V(()=>b("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),ka=V(()=>b("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),xa=V(()=>b("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),Ba=V(()=>b("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),Da=V(()=>b("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),Sa=V(()=>b("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Ma=A({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(r){const n=r,s=J(),l=ne(),p=me(),_=d=>{s.push({...d})},f=x(()=>p.getTabList),v=x(()=>n.itemData.fullPath!==l.fullPath),g=x(()=>n.index===0),C=x(()=>[0,1].includes(n.index)),B=x(()=>n.index===f.value.length-1),m=(d,t)=>{if(p.deleteTag(t,d),n.itemData.fullPath===l.fullPath){const i=f.value[t-1];s.push({name:i.name})}},F=()=>f.value.findIndex(d=>d.fullPath===l.fullPath),D=async d=>{const{itemData:t,index:i}=n,c=[...f.value];if(d==="current")m(t,i);else if(d==="left"){const o=F();c.splice(1,n.index-1),p.freshTabList(c),o<i&&s.push({name:t.name})}else if(d==="right"){const o=F();c.splice(n.index+1),p.freshTabList(c),o>i&&s.push({name:t.name})}else if(d==="others"){const o=f.value.filter((e,h)=>h===0||h===n.index);p.freshTabList(o),s.push({name:t.name})}else d==="reload"?(p.deleteCache(t),await s.push({name:Je,params:{path:l.fullPath}}),p.addCache(t.name)):(p.resetTabList(),s.push({name:Qe}))};return(d,t)=>{const i=Bt,c=Ye,o=Ee,e=Ze,h=Xe,S=et,y=tt,E=ke;return w(),M(E,{trigger:"contextMenu","popup-max-height":!1,onSelect:D},{content:u(()=>[a(o,{disabled:v.value,value:"reload"},{default:u(()=>[a(c),Ea]),_:1},8,["disabled","value"]),a(o,{class:"sperate-line",disabled:g.value,value:"current"},{default:u(()=>[a(i),ka]),_:1},8,["disabled","value"]),a(o,{disabled:C.value,value:"left"},{default:u(()=>[a(e),xa]),_:1},8,["disabled","value"]),a(o,{class:"sperate-line",disabled:B.value,value:"right"},{default:u(()=>[a(h),Ba]),_:1},8,["disabled","value"]),a(o,{value:"others"},{default:u(()=>[a(S),Da]),_:1},8,["value"]),a(o,{value:"all"},{default:u(()=>[a(y),Sa]),_:1},8,["value"])]),default:u(()=>[b("span",{class:xe(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":r.itemData.fullPath===d.$route.fullPath}]),onClick:t[1]||(t[1]=I=>_(r.itemData))},[b("span",Fa,U(d.$t(r.itemData.title)),1),b("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:t[0]||(t[0]=xt(I=>m(r.itemData,r.index),["stop"]))},[a(i)])],2)]),_:1})}}});const $a=j(Ma,[["__scopeId","data-v-17257cfa"]]),Ia=r=>(ae("data-v-509db106"),r=r(),oe(),r),Pa={class:"tab-bar-container"},Aa={class:"tab-bar-box"},La={class:"tab-bar-scroll"},Ra={class:"tags-wrap"},Ta=Ia(()=>b("div",{class:"tag-bar-operation"},null,-1)),za=A({__name:"index",setup(r){const n=O(),s=me(),l=$(),p=x(()=>s.getTabList),_=x(()=>n.navbar?60:0);return H(()=>n.navbar,()=>{l.value.updatePosition()}),pe(f=>{!f.meta.noAffix&&!p.value.some(v=>v.fullPath===f.fullPath)&&s.updateTabList(f)},!0),Dt(()=>{at()}),(f,v)=>{const g=St;return w(),R("div",Pa,[a(g,{ref_key:"affixRef",ref:l,"offset-top":_.value},{default:u(()=>[b("div",Aa,[b("div",La,[b("div",Ra,[(w(!0),R(Ce,null,Fe(p.value,(C,B)=>(w(),M($a,{key:C.fullPath,index:B,"item-data":C},null,8,["index","item-data"]))),128))])]),Ta])]),_:1},8,["offset-top"])])}}});const Na=j(za,[["__scopeId","data-v-509db106"]]);function Oa(r,n,s,l=!1){r.addEventListener&&typeof r.addEventListener=="function"&&r.addEventListener(n,s,l)}function Va(r,n,s,l=!1){r.removeEventListener&&typeof r.removeEventListener=="function"&&r.removeEventListener(n,s,l)}const Ua=992;function qa(){return document.body.getBoundingClientRect().width-1<Ua}function Ha(r){const n=O();function s(){if(!document.hidden){const p=qa();n.toggleDevice(p?"mobile":"desktop"),n.toggleMenu(p)}}const l=Vt(s,100);K(()=>{r&&l()}),Mt(()=>{Oa(window,"resize",l)}),$t(()=>{Va(window,"resize",l)})}const ja={key:0,class:"layout-navbar"},Wa={class:"menu-wrapper"},Ga="60px",Ka=A({__name:"default-layout",setup(r){const n=$(!1),s=O(),l=T(),p=J(),_=ne(),f=de();Ha(!0);const v=x(()=>s.navbar),g=x(()=>s.menu&&!s.topMenu),C=x(()=>s.hideMenu),B=x(()=>s.footer),m=x(()=>s.menuCollapse?48:s.menuWidth),F=x(()=>s.menuCollapse),D=x(()=>{const c=g.value&&!C.value?{paddingLeft:`${m.value}px`}:{},o=v.value?{paddingTop:Ga}:{};return{...c,...o}}),d=c=>{!n.value||s.updateSettings({menuCollapse:c})};H(()=>l.role,c=>{c&&!f.accessRouter(_)&&p.push({name:"notFound"})});const t=$(!1),i=()=>{t.value=!1};return It("toggleDrawerMenu",()=>{t.value=!t.value}),K(()=>{n.value=!0}),(c,o)=>{const e=Lt,h=we,S=Rt,y=Tt;return w(),M(y,{class:xe(["layout",{mobile:k(s).hideMenu}])},{default:u(()=>[v.value?(w(),R("div",ja,[a(Ca)])):P("",!0),a(y,null,{default:u(()=>[a(y,null,{default:u(()=>[g.value?Pt((w(),M(e,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:F.value,collapsible:!0,width:m.value,style:re({paddingTop:v.value?"60px":""}),"hide-trigger":!0,onCollapse:d},{default:u(()=>[b("div",Wa,[a(te)])]),_:1},8,["collapsed","width","style"])),[[At,!C.value]]):P("",!0),C.value?(w(),M(h,{key:1,visible:t.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:i},{default:u(()=>[a(te)]),_:1},8,["visible"])):P("",!0),a(y,{class:"layout-content",style:re(D.value)},{default:u(()=>[k(s).tabBar?(w(),M(Na,{key:0})):P("",!0),a(S,null,{default:u(()=>[a(Zt)]),_:1}),B.value?(w(),M(ot,{key:1})):P("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const wo=j(Ka,[["__scopeId","data-v-a4864bc3"]]);export{wo as default};
