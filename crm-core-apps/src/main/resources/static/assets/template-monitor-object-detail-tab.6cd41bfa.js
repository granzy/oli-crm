import{a as U,c as A,h as y}from"./index.e9d54774.js";/* empty css               *//* empty css                *//* empty css                *//* empty css               */import{d as E,f as p,w as G,o as H,D as n,E as f,u as d,aH as k,aI as v,aU as h,aV as T,aS as u,H as w,aZ as g,bN as K,bO as j,G as z,cc as a,cK as P,cs as Z,bt as q,a_ as J,b0 as Q,ct as W,c9 as X,ca as Y}from"./arco.a97fe066.js";import{j as ee}from"./monitor-object.647fdfa2.js";import{g as l}from"./date-time.3a778351.js";const ae={style:{margin:"10px 24px 5px 24px"}},te=["src"],oe={key:2},fe=E({__name:"grafana-portal",props:{appKey:{type:String,default:""},hostId:{type:String,default:""},tabName:{type:String,default:""},height:{type:String,default:null}},setup(t){const{loading:i,setLoading:b}=U(!0),S=A(),o=p(""),s=p(""),F=p(""),r=t,O=async()=>{b(!0);const{data:e}=await ee(r.appKey,r.hostId,r.tabName);s.value=e,o.value=s.value,setTimeout(()=>{b(!1)},2e3)},C=[{label:"\u6700\u8FD130\u5206\u949F",value:()=>l(.5)},{label:"\u6700\u8FD11\u5C0F\u65F6",value:()=>l(1)},{label:"\u6700\u8FD13\u5C0F\u65F6",value:()=>l(3)},{label:"\u6700\u8FD16\u5C0F\u65F6",value:()=>l(6)},{label:"\u6700\u8FD112\u5C0F\u65F6",value:()=>l(12)},{label:"\u6700\u8FD11\u5929",value:()=>l(24)},{label:"\u6700\u8FD12\u5929",value:()=>l(48)},{label:"\u6700\u8FD11\u5468",value:()=>[a().subtract(1,"week").valueOf(),a().valueOf()]},{label:"\u524D\u5929",value:()=>[a().subtract(2,"day").startOf("day").valueOf(),a().subtract(2,"day").endOf("day").valueOf()]},{label:"\u6628\u5929",value:()=>[a().subtract(1,"day").startOf("day").valueOf(),a().subtract(1,"day").endOf("day").valueOf()]},{label:"\u4ECA\u5929",value:()=>[a().startOf("day").valueOf(),a().valueOf()]}],D=p((()=>{const e=Date.now(),c=60*60*1e3,m=e-c;return s.value.length>0&&(o.value=`${s.value}&from=${m}&to=${e}`),[m,e]})()),x=e=>{o.value=`${s.value}&from=${e[0]}&to=${e[1]}`};return G(()=>S.theme,e=>{F.value=e},{deep:!0,immediate:!0}),H(()=>{O()}),(e,c)=>{const m=P,B=Z,N=q,M=J,V=Q,I=W,R=X,$=Y;return n(),f(h,null,[d(i)?(n(),k(I,{key:0,animation:!0},{default:v(()=>[(n(),f(h,null,T(3,_=>u(V,{key:_},{default:v(()=>[(n(),f(h,null,T(2,L=>u(M,{key:L,span:12},{default:v(()=>[w("div",ae,[u(N,{direction:"vertical",style:{width:"100%"},size:"large"},{default:v(()=>[u(m,{style:{"margin-bottom":"-12px"}}),u(B,{rows:3,"line-height":10})]),_:1})])]),_:2},1024)),64))]),_:2},1024)),64))]),_:1})):g("",!0),!d(i)&&o.value?(n(),k(R,{key:1,modelValue:D.value,"onUpdate:modelValue":c[0]||(c[0]=_=>D.value=_),"show-time":"","value-format":"timestamp",style:{width:"360px",float:"right",marginBottom:"5px"},"shortcuts-position":"left",shortcuts:C,onChange:x},null,8,["modelValue"])):g("",!0),K(w("iframe",{src:o.value+"&theme="+F.value,width:"100%",style:z([{border:"medium none"},{height:r.height?r.height:"calc(100vh - 240px)"}])},null,12,te),[[j,!d(i)&&o.value]]),!d(i)&&!o.value?(n(),f("div",oe,[u($,{description:"\u656C\u8BF7\u671F\u5F85"})])):g("",!0)],64)}}});function de(t){return y.post("/templateMonitorDetailTab/listByTemplateName",t)}function ve(t){return y.post("/templateMonitorDetailTab/fetchAllTemplateConfigByTemplateName",t)}function _e(t){return y.post("/templateMonitorDetailTab/saveTemplateMonitorDetail",t)}export{fe as _,ve as f,de as l,_e as s};
