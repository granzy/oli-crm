import{a as T,T as j,l as h}from"./index.e9d54774.js";/* empty css                *//* empty css               */import{d as q,f as l,w as Y,o as J,aT as K,D as C,E as F,H as m,aS as o,aI as n,aY as c,aW as Q,aU as X,aH as Z,u as k,bz as ee,bg as V,aP as ae,bt as te,a_ as ne,b0 as oe,bf as le,aM as se,bB as ie}from"./arco.a97fe066.js";import{p as ue}from"./pagination.72a5f225.js";import{a as z}from"./problem.b594769f.js";import"./chart.a235fbdf.js";import"./vue.4eb70094.js";import"./FileSaver.min.64c4208e.js";import"./_commonjs-dynamic-modules.30ae7933.js";const ce={class:"page-container"},de={class:"page-panel"},re={style:{height:"calc(100vh - 150px)"}},pe={style:{display:"flex",width:"100%","padding-top":"10px","justify-content":"space-between"}},xe=q({__name:"index",setup(me){const g=l(""),u=l(),{loading:S,setLoading:w}=T(!1),i=l([]),E=l({size:"mini",height:"auto",columnConfig:{resizable:!0},rowConfig:{keyField:"id",isHover:!0},showOverflow:"tooltip",columns:[{title:"\u542F\u7528",field:"enable",minWidth:200,slots:{default:"enable"}},{title:"\u5B57\u6BB5",field:"code",minWidth:200},{title:"\u522B\u540D",field:"name",slots:{default:"name",edit:"name_field"},minWidth:200,editRender:{}},{title:"\u64CD\u4F5C",width:120,slots:{default:"action"}}]}),{pageSizeOptions:L,pagination:b}=ue(),d=l(b.current),r=l(b.pageSize),D=l([]),f=l([]),p=()=>{const e=(d.value-1)*r.value,a=e+r.value;D.value=h.cloneDeep(i.value.slice(e,a))},_=async()=>{w(!0);try{i.value=(await j("\u544A\u8B66\u901A\u7528\u5B57\u6BB5\u914D\u7F6E")).data,f.value=h.cloneDeep(i.value),p()}catch{}finally{w(!1)}},$=async e=>{await z(e),V.success("\u4FDD\u5B58\u6210\u529F\uFF01"),await _()},P=e=>{const a=u.value;return a?a.isEditByRow(e):!1},R=e=>{const a=u.value;a&&a.setEditRow(e)},U=e=>{const a=u.value;a&&a.clearEdit().then(()=>{z(e).then(()=>{V.success("\u4FDD\u5B58\u6210\u529F\uFF01"),_()})})},I=e=>{const a=u.value;a&&a.clearEdit().then(()=>{a.revertData(e)})},B=e=>{e?i.value=f.value.filter(a=>a.code.toLowerCase().indexOf(e.trim().toLowerCase())>-1||a.name.toLowerCase().indexOf(e.trim().toLowerCase())>-1):i.value=h.cloneDeep(f.value),p()};Y(()=>g.value,e=>{B(e)});const N=e=>{d.value=e,p()},O=e=>{d.value=1,r.value=e,p()};return J(()=>{_()}),(e,a)=>{const x=ae,y=te,W=ne,A=oe,G=le,v=se,H=ie,M=K("vxe-grid");return C(),F("div",ce,[m("div",de,[o(A,null,{default:n(()=>[o(W,{span:14},{default:n(()=>[o(y,{style:{"margin-bottom":"5px"}},{default:n(()=>[o(x,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),style:{width:"320px"},placeholder:"\u5173\u952E\u5B57","allow-clear":"",onInput:B},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m("div",re,[o(M,ee({ref_key:"xGrid",ref:u},E.value,{loading:k(S),data:D.value,"edit-config":{trigger:"manual",mode:"row"},"keep-source":""}),{enable:n(({row:t})=>[o(G,{modelValue:t.enable,"onUpdate:modelValue":s=>t.enable=s,onChange:s=>$(t)},{checked:n(()=>[c("\u542F\u7528")]),unchecked:n(()=>[c("\u7981\u7528")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),name:n(({row:t})=>[m("span",null,Q(t.name),1)]),name_field:n(({row:t})=>[o(x,{modelValue:t.name,"onUpdate:modelValue":s=>t.name=s,placeholder:"\u8BF7\u8F93\u5165\u522B\u540D"},null,8,["modelValue","onUpdate:modelValue"])]),action:n(({row:t})=>[P(t)?(C(),F(X,{key:0},[o(v,{onClick:s=>U(t)},{default:n(()=>[c("\u4FDD\u5B58")]),_:2},1032,["onClick"]),o(v,{onClick:s=>I(t)},{default:n(()=>[c("\u53D6\u6D88")]),_:2},1032,["onClick"])],64)):(C(),Z(y,{key:1},{default:n(()=>[o(v,{onClick:s=>R(t)},{default:n(()=>[c("\u7F16\u8F91")]),_:2},1032,["onClick"])]),_:2},1024))]),pager:n(()=>[m("div",pe,[o(H,{ref:"xPagination",total:i.value.length,current:d.value,"page-size":r.value,"page-size-options":k(L),"show-total":"","show-jumper":"","show-page-size":"",onChange:N,onPageSizeChange:O},null,8,["total","current","page-size","page-size-options"])])]),_:1},16,["loading","data"])])])])}}});export{xe as default};
