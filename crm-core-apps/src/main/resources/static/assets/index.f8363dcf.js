import{a as b}from"./index.e9d54774.js";/* empty css                *//* empty css               */import{d as G,f as l,c as H,o as K,aT as M,D as U,E as W,H as u,aS as a,aI as i,br as Y,aY as g,aW as f,u as s,bz as q,aP as J,aN as Q,bt as X,bY as Z,aM as ee,bB as te,bi as oe}from"./arco.a97fe066.js";import{p as ae}from"./pagination.72a5f225.js";import{_ as ie,p as ne,e as se}from"./alert-original.vue_vue_type_script_setup_true_lang.52196415.js";import{d as re}from"./global.90f51a62.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.5f4a4784.js";import{p as de}from"./alert-record.078e7032.js";import"./chart.a235fbdf.js";import"./vue.4eb70094.js";/* empty css                *//* empty css               *//* empty css               */import"./color.562bf6e9.js";const ue={class:"page-container"},ce={class:"page-panel"},pe={style:{height:"calc(100vh - 145px)"}},me={style:{color:"var(--color-bg-5)"}},ge={style:{display:"flex",width:"100%","padding-top":"10px","justify-content":"space-between"}},De=G({__name:"index",emits:["update:checkedRecords"],setup(fe,{emit:w}){const{loading:k,setLoading:h}=b(!1),{pagination:r,pageSizeOptions:B}=ae(),c=l(),A=l(),z=w,p=l({alertId:"",keyword:"",page:r});l({id:"",recoveryStatus:!0});const F=l({size:"mini",height:"auto",columnConfig:{resizable:!0},rowConfig:{keyField:"id",isHover:!0},checkboxConfig:{reserve:!0},showOverflow:"tooltip",columns:[{type:"checkbox",width:60},{title:"\u539F\u59CBID",width:120,field:"problemId"},{title:"\u7EA7\u522B",field:"priority",width:65,slots:{default:"priority"}},{title:"\u544A\u8B66\u6807\u9898",field:"information",minWidth:300,slots:{default:"information"}},{title:"\u5BF9\u8C61\u7C7B\u578B",field:"subtypeStr",width:80},{title:"\u76D1\u63A7\u5BF9\u8C61",field:"hostName",width:150},{title:"IP",field:"ip",width:100},{title:"\u544A\u8B66\u65F6\u95F4",field:"triggerTime",width:160},{title:"\u6062\u590D\u65F6\u95F4",field:"recoverTime",width:160},{title:"\u544A\u8B66\u65F6\u957F",field:"duration",width:135,slots:{default:"duration"}},{title:"\u5E94\u7528",field:"appName",width:100}]}),d=async t=>{t&&(r.current=t),h(!0);const e=c.value;try{const{data:n}=await ne(p.value);r.total=n.totalElements,e&&await e.loadData(n.content)}catch{}finally{h(!1)}},I=t=>{r.current=t,d()},E=t=>{r.pageSize=t,d(1)},_=H(()=>{const t=c.value,e=[];return t&&(e.push(...t.getCheckboxRecords().map(n=>n.id)),e.push(...t.getCheckboxReserveRecords().map(n=>n.id))),e}),v=()=>{const t=c.value;if(t){const e=t.getCheckboxRecords();e.push(...t.getCheckboxReserveRecords()),z("update:checkedRecords",e)}},R=v,D=v,{loading:P,setLoading:C}=b(!1),S=async t=>{try{C(!0),re(await se({...p.value,exportAction:t,originAlertRecordIds:_.value}))}catch(e){console.error(e)}finally{C(!1)}},m=l(!1),y=l(void 0),$=t=>{y.value=t,m.value=!0};return K(()=>{d()}),(t,e)=>{const n=J,L=Q,x=X,N=Z,V=ee,T=te,O=M("vxe-grid"),j=oe;return U(),W("div",ue,[u("div",ce,[a(x,{style:{"margin-bottom":"5px"}},{default:i(()=>[a(n,{modelValue:p.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value.keyword=o),style:{width:"320px"},placeholder:"\u539F\u59CBID/\u544A\u8B66\u6807\u9898/\u76D1\u63A7\u5BF9\u8C61/IP","allow-clear":"",onKeyup:e[1]||(e[1]=Y(o=>d(1),["enter"]))},null,8,["modelValue"]),a(L,{type:"primary",onClick:e[2]||(e[2]=o=>d(1))},{default:i(()=>[g("\u67E5\u8BE2")]),_:1})]),_:1}),u("div",pe,[a(O,q({ref_key:"xGrid",ref:c},F.value,{loading:s(k),onCheckboxChange:s(R),onCheckboxAll:s(D)}),{priority:i(({row:o})=>[a(N,{color:`rgb(var(--${(o.priority?o.priority:"").toLowerCase()}-6))`},{default:i(()=>[u("span",me,f(s(de)[o.priority]),1)]),_:2},1032,["color"])]),duration:i(({row:o})=>[g(f(o.duration),1)]),information:i(({row:o})=>[a(V,{hoverable:!1,style:{"font-size":"12px"},onClick:he=>$(o.id)},{default:i(()=>[g(f(o.information),1)]),_:2},1032,["onClick"])]),pager:i(()=>[u("div",ge,[a(T,{ref_key:"xPagination",ref:A,current:s(r).current,"page-size":s(r).pageSize,total:s(r).total,"page-size-options":s(B),"show-total":"","show-jumper":"","show-page-size":"",onChange:I,onPageSizeChange:E},null,8,["current","page-size","total","page-size-options"]),u("div",null,[a(x,null,{default:i(()=>[a(le,{"selected-data":_.value,loading:s(P),onExport:S},null,8,["selected-data","loading"])]),_:1})])])]),_:1},16,["loading","onCheckboxChange","onCheckboxAll"])])]),a(j,{visible:m.value,"onUpdate:visible":e[3]||(e[3]=o=>m.value=o),title:"\u539F\u59CB\u544A\u8B66\u8BE6\u60C5",width:"50vw","align-center":!1,"unmount-on-close":!0,footer:!1,"hide-cancel":"","esc-to-close":!1},{default:i(()=>[a(ie,{"origin-alert-id":y.value},null,8,["origin-alert-id"])]),_:1},8,["visible"])])}}});export{De as default};
