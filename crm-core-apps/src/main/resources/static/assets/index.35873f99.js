import{a as z}from"./index.e9d54774.js";/* empty css                */import{d as I,f as s,o as ee,n as A,aT as ae,D as P,E as N,H as v,aS as t,aI as o,u as i,aY as c,bz as te,aU as oe,bq as $,h as b,bg as E,aP as ne,bt as le,aN as ue,aM as se,bB as ie,bo as re,bv as de,bp as ce,c3 as pe,c4 as me}from"./arco.a97fe066.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css               */import{p as fe}from"./pagination.72a5f225.js";import{p as _e,c as ve,f as ge,d as Fe,s as ye}from"./model-group.e81e15b0.js";import{d as L}from"./index.127a6572.js";import"./chart.a235fbdf.js";import"./vue.4eb70094.js";const Ce={style:{display:"flex",width:"100%","justify-content":"space-between"}},be={style:{height:"80.5vh","padding-top":"6px"}},Ee={style:{display:"flex",width:"100%","padding-top":"10px","justify-content":"space-between"}},S=I({__name:"model-group-list",props:{level:{type:Number,required:!0,default:0}},setup(h){const{loading:D,setLoading:g}=z(!1),{loading:p,setLoading:m}=z(!1),f=s(),k=h,{pagination:u,pageSizeOptions:T}=fe(),F=s(""),x=s(),r=async()=>{const e=x.value;try{g(!0);const{data:a}=await _e({keyword:F.value,level:k.level,page:u});u.total=a.totalElements,e&&await e.loadData(a.content)}catch(a){console.error(a)}finally{g(!1)}},d=s(!1),l=s({id:void 0,name:"",level:0,description:""}),M={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u540D"},{maxLength:300,message:"\u957F\u5EA6\u987B\u5728300\u4EE5\u5185"},{validator:L(async(e,a)=>{const{data:_}=await ve(l.value);_&&a("\u7EC4\u540D\u5DF2\u5B58\u5728")},300),message:"\u7EC4\u540D\u5DF2\u5B58\u5728"}]},y=s("\u65B0\u5EFA"),O=()=>{var e;l.value={name:"",level:k.level,description:""},(e=f.value)==null||e.clearValidate(),y.value="\u65B0\u5EFA",d.value=!0},U=async e=>{({data:l.value}=await ge(e)),await A(()=>{var a;(a=f.value)==null||a.clearValidate(),y.value="\u7F16\u8F91",d.value=!0})},j=async e=>{console.log(e),$.confirm({title:"\u63D0\u793A",simple:!1,draggable:!0,closable:!1,titleAlign:"start",content:()=>b("div",["\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45",b("span",{style:"color: rgb(var(--danger-6))"},"\u5220\u9664"),'\u6A21\u578B\u5206\u7EC4"',b("span",{style:"color: rgb(var(--primary-6))"},e.name),'"\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F']),onOk:async()=>{if(e.id){const{data:a}=await Fe(e.id);a?(await r(),E.success("\u5220\u9664\u6210\u529F")):E.error("\u5B58\u5728\u5173\u8054\u7684\u6A21\u578B\uFF0C\u65E0\u6CD5\u5220\u9664")}}})},q=async()=>{try{const e=f.value;e&&(m(!0),await e.validate()||(await ye(l.value),d.value=!1,E.success("\u4FDD\u5B58\u6210\u529F"),await r()))}catch(e){console.error(e)}finally{m(!1)}},G=e=>{u.current=e,r()},H=e=>{u.pageSize=e,r()};ee(()=>{A(()=>r())});const W=L(r,350),R=s({size:"mini",height:"auto",columnConfig:{resizable:!0},rowConfig:{keyField:"id",isHover:!0},showOverflow:"tooltip",columns:[{title:"\u7EC4\u540D",minWidth:200,field:"name"},{title:"\u63CF\u8FF0",field:"description",minWidth:300},{title:"\u64CD\u4F5C",field:"acton",slots:{default:"action"},width:120}]});return(e,a)=>{const _=ne,w=le,C=ue,B=se,Y=ie,J=ae("vxe-grid"),V=re,K=de,Q=ce,X=$;return P(),N(oe,null,[v("div",Ce,[t(w,null,{default:o(()=>[t(_,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=n=>F.value=n),placeholder:"\u8F93\u5165\u540D\u79F0/\u63CF\u8FF0\u641C\u7D22",style:{width:"320px"},onInput:i(W)},null,8,["modelValue","onInput"])]),_:1}),t(C,{type:"primary",onClick:O},{default:o(()=>[c("\u65B0\u5EFA")]),_:1})]),v("div",be,[t(J,te({ref_key:"xGrid",ref:x},R.value,{loading:i(D)}),{action:o(({row:n})=>[t(w,null,{default:o(()=>[t(B,{type:"text",onClick:Z=>U(n.id)},{default:o(()=>[c("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(B,{type:"text",onClick:Z=>j(n)},{default:o(()=>[c("\u5220\u9664")]),_:2},1032,["onClick"])]),_:2},1024)]),pager:o(()=>[v("div",Ee,[t(Y,{ref:"xPagination",current:i(u).current,"page-size":i(u).pageSize,total:i(u).total,"page-size-options":i(T),"show-total":"","show-jumper":"","show-page-size":"",onChange:G,onPageSizeChange:H},null,8,["current","page-size","total","page-size-options"])])]),_:1},16,["loading"]),t(X,{"title-align":"start",title:`${y.value}\u6A21\u578B\u5206\u7EC4`,visible:d.value,"mask-closable":!1,draggable:"",onCancel:a[4]||(a[4]=n=>d.value=!1)},{footer:o(()=>[t(C,{onClick:a[3]||(a[3]=n=>d.value=!1)},{default:o(()=>[c("\u53D6\u6D88")]),_:1}),t(C,{type:"primary",loading:i(p),onClick:q},{default:o(()=>[c(" \u786E\u5B9A ")]),_:1},8,["loading"])]),default:o(()=>[t(Q,{ref_key:"saveForm",ref:f,model:l.value,layout:"vertical",size:"medium",rules:M},{default:o(()=>[t(V,{field:"name",label:"\u7EC4\u540D"},{default:o(()=>[t(_,{modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value.name=n)},null,8,["modelValue"])]),_:1}),t(V,{field:"description",label:"\u63CF\u8FF0"},{default:o(()=>[t(K,{modelValue:l.value.description,"onUpdate:modelValue":a[2]||(a[2]=n=>l.value.description=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])])],64)}}}),he={class:"page-container"},De={class:"page-panel"},Te=I({__name:"index",setup(h){return(D,g)=>{const p=pe,m=me;return P(),N("div",he,[v("div",De,[t(m,{"default-active-key":"1","destroy-on-hide":""},{default:o(()=>[t(p,{key:"1",title:"\u4E00\u7EA7\u5206\u7EC4"},{default:o(()=>[t(S,{level:1})]),_:1}),t(p,{key:"2",title:"\u4E8C\u7EA7\u5206\u7EC4"},{default:o(()=>[t(S,{level:2})]),_:1})]),_:1})])])}}});export{Te as default};
