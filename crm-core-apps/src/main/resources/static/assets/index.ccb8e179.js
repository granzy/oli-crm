import{h as ae,a as oe,l as S,q as xe,k as be,Z as we}from"./index.e9d54774.js";/* empty css                */import{d as Z,f,c as ee,D as s,aH as v,aI as l,aY as k,aW as U,aS as u,u as j,G as X,H as z,E as I,aU as H,aV as M,aZ as Y,c7 as re,c8 as ue,ca as De,a_ as se,b0 as pe,c3 as ce,b$ as Te,c0 as Ee,c4 as de,bK as Fe,bi as Ve,r as le,aT as W,bz as fe,bg as ne,aM as me,n as te,bh as ke,w as $e,c9 as Be,bt as Ie,aN as ge,bf as Re,bo as Ae,bp as qe,bq as Oe,bX as Ne}from"./arco.a97fe066.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css               *//* empty css                */import{h as Pe}from"./vue.4eb70094.js";import{r as Se}from"./date-time.3a778351.js";import{d as _e,b as Ke}from"./zabbix-monitor-object.93807a64.js";import{_ as Le}from"./index.vue_vue_type_script_setup_true_lang.dff799f7.js";import{d as Ge}from"./global.90f51a62.js";/* empty css                */import{a as ye}from"./unit-util.2cbd6bbc.js";import{g as ve}from"./common.93e76438.js";/* empty css                */import{a as ze,_ as ie}from"./text-data-table.vue_vue_type_script_setup_true_lang.2f77f7d2.js";import"./chart.a235fbdf.js";import"./moment.a1678c09.js";import"./chart-option.8bf8c179.js";import"./color.562bf6e9.js";/* empty css                */import"./pagination.72a5f225.js";function he(R){return ae.post("/zabbixReportDetail/getReportHorizontalStatisticsDetail",R,{timeout:36e5})}function He(R){return ae.post("/zabbixReportDetail/exportReport",R,{responseType:"blob",timeout:36e5})}function Me(R){return ae.post("/zabbixReportDetail/getReportDetail",R,{timeout:36e5})}const Ue={ref:"screenshotContent",style:{"padding-bottom":"20px"}},Ce=Z({__name:"index",props:{visible:{type:Boolean},queryParams:{},row:{},height:{}},emits:["ok","cancel","getPerformanceData"],setup(R,{emit:K}){const{loading:V,setLoading:E}=oe(!1),m=R,a=f({itemIsNull:!1,showGraph:!0,graph:[],text:[]}),w=ee(()=>{var b;return S.uniq((b=a.value)==null?void 0:b.text.map(T=>T.appKey+T.hostid)).length}),h=f("graph"),d=K,D=ee(()=>m.row.itemIds?m.row.itemIds.map(b=>({appKey:m.row.appKey,itemId:b})):[]),C=f("HOUR"),y=async()=>{var T,q,G;const b={timeFrom:(T=m.queryParams)==null?void 0:T.timeFrom,timeTill:(q=m.queryParams)==null?void 0:q.timeTill,hoursPeriod:(G=m.queryParams)==null?void 0:G.hoursPeriod,detailGraininess:C.value,appKeyItemIds:D.value};E(!0);try{a.value=(await Me(b)).data,d("getPerformanceData",a.value)}catch(F){console.error(F)}finally{E(!1)}},O=ee(()=>{if(m.row){if(m.row.name)return m.row.name;if(m.row.host)return m.row.host}return""}),L=async()=>{var b;h.value="graph",C.value="HOUR",await y(),(b=a.value)!=null&&b.showGraph||(h.value="text")},P=b=>C.value==="HISTORY"?"history":b==="0"||b==="3"?"trend":"history";return(b,T)=>{const q=re,G=ue,F=De,p=se,B=pe,A=ce,o=Te,t=Ee,i=de,g=Fe,n=Ve;return s(),v(n,{visible:b.visible,width:"50vw","title-align":"start","mask-closable":!0,"unmount-on-close":"",footer:!1,onOpen:L,onCancel:T[2]||(T[2]=()=>d("cancel"))},{title:l(()=>[k("\u62A5\u8868\u660E\u7EC6["+U(O.value)+"]",1)]),default:l(()=>[u(g,{loading:j(V),style:X({width:"100%",height:b.height})},{default:l(()=>{var r;return[u(G,{modelValue:C.value,"onUpdate:modelValue":T[0]||(T[0]=e=>C.value=e),onChange:y},{default:l(()=>[u(q,{value:"HISTORY"},{default:l(()=>[k("\u539F\u59CB\u6570\u636E")]),_:1}),u(q,{value:"HOUR"},{default:l(()=>[k("\u6309\u5C0F\u65F6")]),_:1}),u(q,{value:"DAY"},{default:l(()=>[k("\u6309\u5929")]),_:1})]),_:1},8,["modelValue"]),(r=a.value)!=null&&r.itemIsNull?(s(),v(F,{key:1},{default:l(()=>[k("\u6682\u65E0\u6570\u636E")]),_:1})):(s(),v(i,{key:0,"active-key":h.value,"onUpdate:activeKey":T[1]||(T[1]=e=>h.value=e)},{default:l(()=>[a.value&&a.value.showGraph?(s(),v(A,{key:"graph",title:"\u56FE\u5F62\u5386\u53F2"},{default:l(()=>[z("div",{style:X([{"overflow-y":"auto"},{height:b.height}])},[z("div",Ue,[u(B,null,{default:l(()=>[u(p,{span:24},{default:l(()=>[a.value&&a.value.graph.length>0?(s(!0),I(H,{key:0},M(a.value.graph,(e,c)=>(s(),v(ze,{key:c,"graph-data":e,"single-line":a.value.graph.length===1&&a.value.graph[0].length===1,"display-name-show":w.value>1,"x-axis-type":C.value==="DAY"?"category":"time"},null,8,["graph-data","single-line","display-name-show","x-axis-type"]))),128)):j(V)?Y("",!0):(s(),v(F,{key:1},{default:l(()=>[k("\u8BE5\u65F6\u95F4\u6BB5\u5185\u6682\u65E0\u6570\u636E")]),_:1}))]),_:1})]),_:1})],512)],4)]),_:1})):Y("",!0),u(A,{key:"text",title:"\u6587\u672C\u5386\u53F2"},{default:l(()=>[z("div",{style:X([{"overflow-y":"auto"},{height:b.height}])},[u(B,null,{default:l(()=>[a.value&&a.value.text&&a.value.text.length>0?(s(),v(p,{key:0,span:24},{default:l(()=>[D.value.length===1?(s(),v(ie,{key:0,"table-height":`calc(${b.height} - 140px)`,"text-data":a.value.text[0],"data-type":P(a.value.text[0].valueType),max:!0,min:!0},null,8,["table-height","text-data","data-type"])):(s(),v(t,{key:1,"default-active-key":[0],accordion:""},{default:l(()=>[(s(!0),I(H,null,M(a.value.text,(e,c)=>(s(),v(o,{key:c,header:e.itemName+(w.value>1?" ["+e.displayName+"]":"")},{default:l(()=>[u(ie,{"table-height":"calc(100vh - 410px)","text-data":e,"data-type":P(e.valueType),max:!0,min:!0},null,8,["text-data","data-type"])]),_:2},1032,["header"]))),128))]),_:1}))]),_:1})):(s(),v(p,{key:1,span:24},{default:l(()=>[j(V)?Y("",!0):(s(),v(F,{key:0},{default:l(()=>[k("\u8BE5\u65F6\u95F4\u6BB5\u5185\u6682\u65E0\u6570\u636E")]),_:1}))]),_:1}))]),_:1})],4)]),_:1})]),_:1},8,["active-key"]))]}),_:1},8,["loading","style"])]),_:1},8,["visible"])}}}),Ye={key:1},je=Z({__name:"lld-type-table",props:{reportConfig:{},queryParams:{},type:{},height:{}},setup(R,{expose:K}){const{loading:V,setLoading:E}=oe(!1),m=f(),$=le({current:1,pageSize:30,total:0}),a=R,w=f(),h=f(),d=async()=>{const o={border:!0,align:null,size:"mini",height:"auto",columnConfig:{resizable:!0}};w.value={...o}},D=f([]),C=f([]),y=f([]),O=f([]),L=o=>o||"-",P=o=>o?ye(Number(o),2):"-",b=async(o={...a.queryParams,page:$})=>{E(!0);try{o.itemTypeList=[a.type],h.value=await ve(a.reportConfig),D.value=[],_e.filter(t=>{var i;return a.reportConfig&&a.reportConfig.monitorObjectTypeAttrs?((i=a.reportConfig.monitorObjectTypeAttrs)==null?void 0:i.indexOf(t.value))>-1:!1}).forEach(t=>{D.value.push({field:`${t.value}`,title:t.label,width:150})}),h.value&&h.value.forEach(t=>{D.value.push({field:`zbxHostInventory_${t.inventoryField}`,title:t.fieldName,width:150})}),D.value.push({field:"itemKey",title:"\u5173\u952E\u5B57",width:150}),C.value=[],a.reportConfig&&a.reportConfig.metricTags&&(C.value=a.reportConfig.metricTags.filter(t=>t.type===a.type).map(t=>{var g,n,r;const i=[];return t.valueType==="1"||t.valueType==="2"||t.valueType==="4"?i.push({field:`${t.name}_latestValue`,title:"\u6700\u65B0\u503C",width:150}):((g=a.reportConfig)!=null&&g.statsMax&&i.push({field:`${t.name}_maxValue`,title:"\u6700\u5927\u503C",width:150}),(n=a.reportConfig)!=null&&n.statsMin&&i.push({field:`${t.name}_minValue`,title:"\u6700\u5C0F\u503C",width:150}),(r=a.reportConfig)!=null&&r.statsAvg&&i.push({field:`${t.name}_avgValue`,title:"\u5E73\u5747\u503C",width:150})),{title:t.name,key:t.name,columns:i}}))}catch(t){console.error(t)}finally{E(!1)}},T=async(o={...a.queryParams,page:$})=>{const t=m.value;try{if(E(!0),t){const{data:i}=await he(o);if(O.value=i.content,await d(),i.content.length>0){i.content.forEach(n=>{if(n.statisticItemValueList.length>0)n.statisticItemValueList.forEach(r=>{r.itemDataList.forEach(e=>{let c={appKey:n.appKey,hostId:n.hostId};D.value.forEach(N=>{c[N.field]=n.fieldValues[N.field]}),c.itemKey=e.itemKeyTagValue||"-";const _=e.itemId,x=e.itemKeyTagValue&&S.find(y.value,{appKey:n.appKey,hostId:n.hostId,itemKey:e.itemKeyTagValue});if(x?(c=x,c.itemIds.push(_)):c.itemIds=[_],e.valueType==="1"||e.valueType==="2"||e.valueType==="4")c[`${r.tagName}_latestValue`]=L(e.latestValue);else{const N=P(e.maxValue),J=P(e.minValue),Q=P(e.value);c[`${r.tagName}_maxValue`]=N,c[`${r.tagName}_minValue`]=J,c[`${r.tagName}_avgValue`]=Q}x||y.value.push(c)})});else{const r={hostId:n.hostId};D.value.forEach(e=>{r[e.field]=n.fieldValues[e.field]}),y.value.push(r)}});const g={};i.content.forEach(n=>{n.statisticItemValueList.forEach(r=>{g[r.tagName]||(g[r.tagName]=[]),g[r.tagName].push(...r.itemDataList.filter(e=>e.units).map(e=>e.units))})}),C.value.forEach(n=>{n.title=`${n.key} \u5355\u4F4D(${S.uniq(g[n.key])})`}),await t.loadData(y.value)}}}catch(i){console.error(i)}finally{E(!1)}},q=async(o={...a.queryParams,page:$})=>{await b(o),await T(o)},G=()=>{$.current=1,y.value=[];const o=m.value;o&&(o.clearScroll(),o.clearData(),o.loadData([])),q()},F=async o=>{const{scrollTop:t,scrollHeight:i,bodyHeight:g,isY:n}=o;m.value&&n&&t+g+1>=i&&($.current+=1,await T(),O.value.length===0&&ne.warning("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86~~"))},p=f(!1),B=f(),A=o=>{p.value=!0,B.value=o};return K({fetchData:q,refreshData:G}),(o,t)=>{const i=me,g=W("vxe-column"),n=W("vxe-colgroup"),r=W("vxe-table");return s(),I("div",{style:X([{height:o.height},{margin:"0 12px 6px 12px"}])},[u(r,fe({ref_key:"xGrid",ref:m,size:"mini",loading:j(V)},w.value,{onScroll:F}),{default:l(()=>[(s(!0),I(H,null,M(D.value,(e,c)=>(s(),v(g,{key:c,field:e.field,title:e.title,width:e.width},{default:l(({row:_})=>[e.field==="itemKey"&&_[e.field]?(s(),v(i,{key:0,onClick:x=>A(_)},{default:l(()=>[k(U(_[e.field]),1)]),_:2},1032,["onClick"])):(s(),I("span",Ye,U(_[e.field]||"-"),1))]),_:2},1032,["field","title","width"]))),128)),(s(!0),I(H,null,M(C.value,(e,c)=>(s(),v(n,{key:c,title:e.title},{default:l(()=>[(s(!0),I(H,null,M(e.columns,(_,x)=>(s(),v(g,{key:x,field:_.field,title:_.title,width:_.width},{default:l(({row:N})=>[k(U(N[_.field]||"-"),1)]),_:2},1032,["field","title","width"]))),128))]),_:2},1032,["title"]))),128))]),_:1},16,["loading"]),u(Ce,{visible:p.value,"query-params":o.queryParams,row:B.value,height:"calc(100vh - 176px)",onCancel:t[0]||(t[0]=e=>p.value=!1)},null,8,["visible","query-params","row"])],4)}}}),We={key:1},Ze=Z({__name:"common-type-table",props:{reportConfig:{},queryParams:{},type:{},height:{}},setup(R,{expose:K}){const{loading:V,setLoading:E}=oe(!1),m=f(),$=le({current:1,pageSize:30,total:0}),a=R,w=f(),h=f(),d=async()=>{const o={border:!0,align:null,size:"mini",height:"auto",columnConfig:{resizable:!0}};w.value={...o}},D=f([]),C=f([]),y=f([]),O=f([]),L=o=>o||"-",P=o=>o?ye(Number(o),2):"-",b=async(o={...a.queryParams,page:$})=>{try{o.itemTypeList=[a.type],E(!0),h.value=await ve(a.reportConfig),D.value=[],_e.filter(t=>{var i;return a.reportConfig&&a.reportConfig.monitorObjectTypeAttrs?((i=a.reportConfig.monitorObjectTypeAttrs)==null?void 0:i.indexOf(t.value))>-1:!1}).forEach(t=>{D.value.push({field:`${t.value}`,title:t.label,width:150})}),h.value&&h.value.forEach(t=>{D.value.push({field:`zbxHostInventory_${t.inventoryField}`,title:t.fieldName,width:150})}),C.value=[],a.reportConfig&&a.reportConfig.metricTags&&(C.value=a.reportConfig.metricTags.filter(t=>t.type===a.type).map(t=>{var g,n,r;const i=[];return t.valueType==="1"||t.valueType==="2"||t.valueType==="4"?i.push({field:`${t.name}_latestValue`,title:"\u6700\u65B0\u503C",width:150}):((g=a.reportConfig)!=null&&g.statsMax&&i.push({field:`${t.name}_maxValue`,title:"\u6700\u5927\u503C",width:150}),(n=a.reportConfig)!=null&&n.statsMin&&i.push({field:`${t.name}_minValue`,title:"\u6700\u5C0F\u503C",width:150}),(r=a.reportConfig)!=null&&r.statsAvg&&i.push({field:`${t.name}_avgValue`,title:"\u5E73\u5747\u503C",width:150})),{title:t.name,key:t.name,columns:i}}))}catch(t){console.error(t)}finally{E(!1)}},T=async(o={...a.queryParams,page:$})=>{E(!0);const t=m.value;try{if(t){const{data:i}=await he(o);if(O.value=i.content,await d(),i.content.length>0){i.content.forEach(n=>{if(n.statisticItemValueList.length>0)n.statisticItemValueList.forEach(r=>{r.itemDataList.forEach(e=>{let c={appKey:n.appKey,hostId:n.hostId};D.value.forEach(N=>{c[N.field]=n.fieldValues[N.field]});const _=e.itemId,x=S.find(y.value,{appKey:n.appKey,hostId:n.hostId});if(x?(c=x,c.itemIds.push(_)):c.itemIds=[_],e.valueType==="1"||e.valueType==="2"||e.valueType==="4")c[`${r.tagName}_latestValue`]=L(e.latestValue);else{const N=P(e.maxValue),J=P(e.minValue),Q=P(e.value);c[`${r.tagName}_maxValue`]=N,c[`${r.tagName}_minValue`]=J,c[`${r.tagName}_avgValue`]=Q}x||y.value.push(c)})});else{const r={hostId:n.hostId};D.value.forEach(e=>{r[e.field]=n.fieldValues[e.field]}),y.value.push(r)}});const g={};i.content.forEach(n=>{n.statisticItemValueList.forEach(r=>{g[r.tagName]||(g[r.tagName]=[]),g[r.tagName].push(...r.itemDataList.filter(e=>e.units).map(e=>e.units))})}),C.value.forEach(n=>{n.title=`${n.key} \u5355\u4F4D(${S.uniq(g[n.key])})`}),await t.loadData(y.value)}}}catch(i){console.error(i)}finally{E(!1)}},q=async(o={...a.queryParams,page:$})=>{await b(o),await T(o)},G=()=>{$.current=1,y.value=[];const o=m.value;o&&(o.clearScroll(),o.clearData(),o.loadData([])),q()},F=async o=>{const{scrollTop:t,scrollHeight:i,bodyHeight:g,isY:n}=o;m.value&&n&&t+g+1>=i&&($.current+=1,await T(),O.value.length===0&&ne.warning("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86~~"))},p=f(!1),B=f(),A=o=>{p.value=!0,B.value=o};return K({fetchData:q,refreshData:G}),(o,t)=>{const i=me,g=W("vxe-column"),n=W("vxe-colgroup"),r=W("vxe-table");return s(),I("div",{style:X([{height:o.height},{margin:"0 12px 6px 12px"}])},[u(r,fe({ref_key:"xGrid",ref:m,size:"mini",loading:j(V)},w.value,{onScroll:F}),{default:l(()=>[(s(!0),I(H,null,M(D.value,(e,c)=>(s(),v(g,{key:c,field:e.field,title:e.title,width:e.width},{default:l(({row:_})=>[(e.field==="host"||e.field==="name")&&_[e.field]?(s(),v(i,{key:0,onClick:x=>A(_)},{default:l(()=>[k(U(_[e.field]),1)]),_:2},1032,["onClick"])):(s(),I("span",We,U(_[e.field]||"-"),1))]),_:2},1032,["field","title","width"]))),128)),(s(!0),I(H,null,M(C.value,(e,c)=>(s(),v(n,{key:c,title:e.title},{default:l(()=>[(s(!0),I(H,null,M(e.columns,(_,x)=>(s(),v(g,{key:x,field:_.field,title:_.title,width:_.width},{default:l(({row:N})=>[k(U(N[_.field]||"-"),1)]),_:2},1032,["field","title","width"]))),128))]),_:2},1032,["title"]))),128))]),_:1},16,["loading"]),u(Ce,{visible:p.value,"query-params":o.queryParams,row:B.value,height:"calc(100vh - 176px)",onCancel:t[0]||(t[0]=e=>p.value=!1)},null,8,["visible","query-params","row"])],4)}}}),Xe={key:0},Je=z("p",null," \u8BE5\u7C7B\u578B\u5305\u542B\u81EA\u52A8\u53D1\u73B0\u76D1\u63A7\u9879\u548C\u975E\u81EA\u52A8\u53D1\u73B0\u76D1\u63A7\u9879,\u65E0\u6CD5\u5C55\u793A\u6570\u636E,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u68C0\u67E5zabbix\u6807\u7B7E ",-1),Qe=Z({__name:"index",props:{reportConfig:{},queryParams:{}},setup(R,{expose:K}){const V=R,E=f(),m=f([]),$=()=>{V.reportConfig&&V.reportConfig.metricTags&&(m.value=S.uniq(V.reportConfig.metricTags.map(w=>w.type))),te(()=>{E.value&&E.value.forEach(w=>{w.refreshData()})})},a=w=>{if(V.reportConfig&&V.reportConfig.metricTags){const h=V.reportConfig.metricTags.filter(C=>C.type===w),d=h.every(C=>C.discover==="true"),D=h.every(C=>C.discover==="false");return d?"lld":D?"common":"mixin"}return""};return K({refreshData:$}),(w,h)=>{const d=ke,D=ce,C=de;return s(),v(C,{type:"card"},{default:l(()=>[(s(!0),I(H,null,M(m.value,(y,O)=>(s(),v(D,{key:O,title:y},{default:l(()=>[a(y)==="mixin"?(s(),I("div",Xe,[u(d,{type:"error"},{default:l(()=>[Je]),_:1})])):Y("",!0),a(y)==="lld"?(s(),v(je,{key:1,ref_for:!0,ref_key:"mixinTypeTableRef",ref:E,height:"calc(100vh - 248px)","query-params":w.queryParams,"report-config":w.reportConfig,type:y},null,8,["query-params","report-config","type"])):Y("",!0),a(y)==="common"?(s(),v(Ze,{key:2,ref_for:!0,ref_key:"mixinTypeTableRef",ref:E,height:"calc(100vh - 248px)","query-params":w.queryParams,"report-config":w.reportConfig,type:y},null,8,["query-params","report-config","type"])):Y("",!0)]),_:2},1032,["title"]))),128))]),_:1})}}}),et={style:{height:"16vh"}},tt=Z({__name:"index",emits:["getReportConfig"],setup(R,{emit:K}){const V=Pe(),E=xe(),m=f(),$=f(""),a=f(),w=f("HORIZONTAL"),h={exportDetail:!1,detailGraininess:"HOUR",exportDetailChart:!1},d=le({reportConfigId:V.query["report-config-id"],category:$.value,displayType:w.value,timeFrom:0,timeTill:0,hoursPeriod:"ALL_DAY",exportDetail:S.cloneDeep(h.exportDetail),detailGraininess:S.cloneDeep(h.detailGraininess),exportDetailChart:S.cloneDeep(h.exportDetailChart)}),D=K,y=f((()=>{const F=Date.now(),p=60*60*24*1e3;return[F-p,F]})()),O=f("ALL_DAY"),L=()=>{te(()=>{d.hoursPeriod=O.value,m.value.refreshData()})},P=()=>{const[F,p]=y.value;d.timeFrom=Math.floor(F/1e3),d.timeTill=Math.floor(p/1e3),L()},b=async()=>{const F=(await Ke(V.query["report-config-id"])).data;F&&(a.value=F,D("getReportConfig",F));const[p,B]=y.value;d.timeFrom=Math.floor(p/1e3),d.timeTill=Math.floor(B/1e3),L()},T=f(!1),q=async()=>{var F,p,B;ne.loading("\u5DF2\u521B\u5EFA\u4E0B\u8F7D\u4EFB\u52A1\uFF0C\u5B8C\u6210\u540E\u6D4F\u89C8\u5668\u5C06\u81EA\u52A8\u4E0B\u8F7D\uFF01"),T.value=!1;try{E.addDownloadItem((F=a.value)==null?void 0:F.name),Ge(await He(d),`${(p=a.value)==null?void 0:p.name}.xlsx`),E.delDownloadItem((B=a.value)==null?void 0:B.name)}catch(A){console.error(A)}},G=()=>{d.exportDetail=S.cloneDeep(h.exportDetail),d.detailGraininess=S.cloneDeep(h.detailGraininess),d.exportDetailChart=S.cloneDeep(h.exportDetailChart)};return $e(()=>V.query["report-config-id"],()=>{te(()=>{b()})},{deep:!0,immediate:!0}),(F,p)=>{const B=Be,A=re,o=ue,t=Ie,i=se,g=ge,n=pe,r=Re,e=Ae,c=qe,_=Oe;return s(),I(H,null,[u(n,{gutter:10},{default:l(()=>[u(i,{span:24},{default:l(()=>[u(n,{style:{"margin-bottom":"4px","padding-bottom":"4px"}},{default:l(()=>[u(i,{span:18},{default:l(()=>[u(t,null,{default:l(()=>[u(B,{modelValue:y.value,"onUpdate:modelValue":p[0]||(p[0]=x=>y.value=x),"show-time":"","value-format":"timestamp",style:{width:"400px"},"shortcuts-position":"left",shortcuts:j(Se),onChange:P},null,8,["modelValue","shortcuts"]),u(o,{modelValue:O.value,"onUpdate:modelValue":p[1]||(p[1]=x=>O.value=x),onChange:L},{default:l(()=>[u(A,{value:"ALL_DAY"},{default:l(()=>[k("\u5168\u5929")]),_:1}),u(A,{value:"WORK_HOURS"},{default:l(()=>[k("\u5DE5\u4F5C\u65F6\u95F4\u6BB5")]),_:1}),u(A,{value:"NOT_WORK_HOURS"},{default:l(()=>[k("\u975E\u5DE5\u4F5C\u65F6\u95F4\u6BB5")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(i,{span:6,style:{"text-align":"right"}},{default:l(()=>[u(t,null,{default:l(()=>[u(Le,{onClick:L}),u(g,{type:"primary",onClick:p[2]||(p[2]=x=>T.value=!0)},{default:l(()=>[k(" \u5BFC\u51FA ")]),_:1})]),_:1})]),_:1})]),_:1}),u(Qe,{ref_key:"horizontalDisplayAggregationRef",ref:m,"query-params":d,"report-config":a.value},null,8,["query-params","report-config"])]),_:1})]),_:1}),u(_,{"unmount-on-close":"",visible:T.value,width:"500","title-align":"start","mask-closable":!1,draggable:"",onCancel:p[6]||(p[6]=x=>T.value=!1),onBeforeOpen:G,onOk:q},{title:l(()=>[k("\u5BFC\u51FA\u8BBE\u7F6E")]),default:l(()=>[z("div",et,[u(c,{ref:"submitFormRef",model:d,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:l(()=>[u(e,{field:"exportDetail",label:"\u5BFC\u51FA\u660E\u7EC6",required:""},{default:l(()=>[u(r,{modelValue:d.exportDetail,"onUpdate:modelValue":p[3]||(p[3]=x=>d.exportDetail=x),size:"small"},null,8,["modelValue"])]),_:1}),d.exportDetail?(s(),v(e,{key:0,field:"detailGraininess",label:"\u660E\u7EC6\u9897\u7C92\u5EA6",required:""},{default:l(()=>[u(o,{modelValue:d.detailGraininess,"onUpdate:modelValue":p[4]||(p[4]=x=>d.detailGraininess=x)},{default:l(()=>[u(A,{value:"HISTORY"},{default:l(()=>[k("\u539F\u59CB\u6570\u636E")]),_:1}),u(A,{value:"HOUR"},{default:l(()=>[k("\u6309\u5C0F\u65F6")]),_:1}),u(A,{value:"DAY"},{default:l(()=>[k("\u6309\u5929")]),_:1})]),_:1},8,["modelValue"])]),_:1})):Y("",!0),d.exportDetail?(s(),v(e,{key:1,field:"exportDetailChart",label:"\u660E\u7EC6\u56FE\u8868",required:""},{default:l(()=>[u(r,{modelValue:d.exportDetailChart,"onUpdate:modelValue":p[5]||(p[5]=x=>d.exportDetailChart=x),size:"small"},null,8,["modelValue"])]),_:1})):Y("",!0)]),_:1},8,["model"])])]),_:1},8,["visible"])],64)}}}),at={class:"page-container"},ot={class:"page-panel",style:{height:"calc(100vh - 84px)"}},lt={style:{"border-bottom":"1px solid var(--color-border)","margin-bottom":"4px","padding-bottom":"4px",display:"flex","justify-content":"space-between","align-items":"center"}},nt={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},it=z("div",{style:{color:"var(--color-text-2)","background-color":"var(--color-bg-7)",padding:"4px 18px"}}," \u6570\u503C\u7C7B\u578B\u53EA\u663E\u793A\u6700\u5927\u503C\u3001\u6700\u5C0F\u503C\u548C\u5E73\u5747\u503C\uFF0C\u6587\u672C\u7C7B\u578B\u53EA\u663E\u793A\u6700\u65B0\u503C ",-1),It=Z({__name:"index",setup(R){const K=()=>{window.parent.history.state.back?be.push({path:window.parent.history.state.back}):window.history.go(-1)},V=f(),E=m=>{V.value=m};return(m,$)=>{var d;const a=we,w=ge,h=Ne;return s(),I("div",at,[z("div",ot,[z("div",lt,[z("div",nt,[z("div",null,[u(w,{type:"text",onClick:K},{icon:l(()=>[u(a)]),default:l(()=>[k("\u8FD4\u56DE")]),_:1}),u(h,{direction:"vertical"}),k(" "+U((d=V.value)==null?void 0:d.name),1)]),it])]),u(tt,{onGetReportConfig:E})])])}}});export{It as default};
