import{l as r,_ as I}from"./index.e9d54774.js";import{d as S,f as m,D as x,E as h,aS as c,aI as d,aY as g,u as V,aW as B,aZ as N,aU as O,aN as U,bZ as J,bi as $,bI as q,bJ as Z,H as j}from"./arco.a97fe066.js";import{D as H}from"./vuedraggable.umd.d90dc502.js";const K=a=>(q("data-v-7468c93b"),a=a(),Z(),a),T={key:0,class:"field-draggable"},W=K(()=>j("span",null,"\u22EE\u22EE",-1)),Y=S({__name:"index",props:{configId:{type:String,default:void 0,required:!0},columnConfig:{type:Array,default:void 0,required:!0}},emits:["close","save"],setup(a,{expose:D,emit:k}){const b=k,i=m(!1),s=m([]),f=a,E=(l,e)=>{const _=`vxe_column_config_${l}`,n=localStorage.getItem(_);let u=[];if(n&&(u=JSON.parse(n)),e==null||e.forEach(t=>{t.visible=t.visible===void 0?!0:t.visible}),l===void 0)return console.warn("\u5217\u914D\u7F6EID\u4E3A\u7A7A"),e||[];if(e===void 0)return console.warn("\u521D\u59CB\u5217\u914D\u7F6E\u4E3A\u7A7A"),[];if(u.length===0)return console.warn("\u672C\u5730\u5B58\u50A8\u7684\u5217\u914D\u7F6E\u4E3A\u7A7A"),e||[];e.forEach(t=>{const v=u.find(w=>w.field===t.field);v&&(t.visible=v.visible===void 0?!0:v.visible)});const o=r.map(e,t=>t.field?t.field:t.type==="checkbox"?"checkbox":(console.warn("\u5217\u914D\u7F6E\u6570\u636E\u5B58\u5728\u95EE\u9898\u9664\u4E86checkbox\u5916\u90FD\u9700\u8981field\u5C5E\u6027"),"")),p=r.map(e,t=>t.field?t.field:t.type==="checkbox"?"checkbox":(console.warn("\u5217\u914D\u7F6E\u6570\u636E\u5B58\u5728\u95EE\u9898\u9664\u4E86checkbox\u5916\u90FD\u9700\u8981field\u5C5E\u6027"),""));return e.length===u.length&&r.intersection(o,p).length===e.length&&(e=u),e},C=()=>{s.value=E(f.configId,r.cloneDeep(f.columnConfig))},y=()=>{i.value=!0},F=()=>{i.value=!1,b("close",!1)},A=()=>{localStorage.setItem(`vxe_column_config_${f.configId}`,JSON.stringify(s.value)),b("save",s.value),i.value=!1};return D({genActualColumnConfig:(l,e)=>E(l,e)}),(l,e)=>{const _=U,n=J,u=$;return x(),h(O,null,[c(_,{onClick:y},{default:d(()=>[g("\u5217\u914D\u7F6E")]),_:1}),c(u,{width:"30vw",visible:i.value,title:"\u5217\u914D\u7F6E","unmount-on-close":"","mask-closable":!1,onBeforeOpen:C,onOk:A,onCancel:F},{default:d(()=>[c(V(H),{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value=o),"item-key":"title"},{item:d(({element:o})=>[o.type!=="checkbox"&&o.title!=="\u64CD\u4F5C"?(x(),h("div",T,[W,c(n,{modelValue:o.visible,"onUpdate:modelValue":p=>o.visible=p},{default:d(()=>[g(B(`\u5217\u540D: ${o.title}`),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):N("",!0)]),_:1},8,["modelValue"])]),_:1},8,["visible"])],64)}}});const M=I(Y,[["__scopeId","data-v-7468c93b"]]);export{M as c};
